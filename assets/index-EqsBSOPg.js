var qe=Object.defineProperty;var Ve=(n,i,t)=>i in n?qe(n,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[i]=t;var h=(n,i,t)=>(Ve(n,typeof i!="symbol"?i+"":i,t),t);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function ht(){}function xe(n){return n()}function le(){return Object.create(null)}function pt(n){n.forEach(xe)}function we(n){return typeof n=="function"}function Ge(n,i){return n!=n?i==i:n!==i||n&&typeof n=="object"||typeof n=="function"}function Xe(n){return Object.keys(n).length===0}function m(n,i){n.appendChild(i)}function Ye(n,i,t){n.insertBefore(i,t||null)}function Ce(n){n.parentNode&&n.parentNode.removeChild(n)}function v(n){return document.createElement(n)}function Ke(n){return document.createTextNode(n)}function I(){return Ke(" ")}function D(n,i,t,e){return n.addEventListener(i,t,e),()=>n.removeEventListener(i,t,e)}function ue(n){return function(i){return i.stopPropagation(),n.call(this,i)}}function g(n,i,t){t==null?n.removeAttribute(i):n.getAttribute(i)!==t&&n.setAttribute(i,t)}function Qe(n){return Array.from(n.childNodes)}function K(n,i,t){n.classList.toggle(i,!!t)}let ft;function dt(n){ft=n}function Je(){if(!ft)throw new Error("Function called outside component initialization");return ft}function Ze(n){Je().$$.on_mount.push(n)}const Z=[],ce=[];let et=[];const de=[],tn=Promise.resolve();let Ft=!1;function en(){Ft||(Ft=!0,tn.then(ke))}function Wt(n){et.push(n)}const Pt=new Set;let Q=0;function ke(){if(Q!==0)return;const n=ft;do{try{for(;Q<Z.length;){const i=Z[Q];Q++,dt(i),nn(i.$$)}}catch(i){throw Z.length=0,Q=0,i}for(dt(null),Z.length=0,Q=0;ce.length;)ce.pop()();for(let i=0;i<et.length;i+=1){const t=et[i];Pt.has(t)||(Pt.add(t),t())}et.length=0}while(Z.length);for(;de.length;)de.pop()();Ft=!1,Pt.clear(),dt(n)}function nn(n){if(n.fragment!==null){n.update(),pt(n.before_update);const i=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,i),n.after_update.forEach(Wt)}}function sn(n){const i=[],t=[];et.forEach(e=>n.indexOf(e)===-1?i.push(e):t.push(e)),t.forEach(e=>e()),et=i}const on=new Set;function rn(n,i){n&&n.i&&(on.delete(n),n.i(i))}function an(n,i,t){const{fragment:e,after_update:s}=n.$$;e&&e.m(i,t),Wt(()=>{const o=n.$$.on_mount.map(xe).filter(we);n.$$.on_destroy?n.$$.on_destroy.push(...o):pt(o),n.$$.on_mount=[]}),s.forEach(Wt)}function ln(n,i){const t=n.$$;t.fragment!==null&&(sn(t.after_update),pt(t.on_destroy),t.fragment&&t.fragment.d(i),t.on_destroy=t.fragment=null,t.ctx=[])}function un(n,i){n.$$.dirty[0]===-1&&(Z.push(n),en(),n.$$.dirty.fill(0)),n.$$.dirty[i/31|0]|=1<<i%31}function cn(n,i,t,e,s,o,r=null,a=[-1]){const l=ft;dt(n);const c=n.$$={fragment:null,ctx:[],props:o,update:ht,not_equal:s,bound:le(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(l?l.$$.context:[])),callbacks:le(),dirty:a,skip_bound:!1,root:i.target||l.$$.root};r&&r(c.root);let d=!1;if(c.ctx=t?t(n,i.props||{},(u,f,...p)=>{const y=p.length?p[0]:f;return c.ctx&&s(c.ctx[u],c.ctx[u]=y)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](y),d&&un(n,u)),f}):[],c.update(),d=!0,pt(c.before_update),c.fragment=e?e(c.ctx):!1,i.target){if(i.hydrate){const u=Qe(i.target);c.fragment&&c.fragment.l(u),u.forEach(Ce)}else c.fragment&&c.fragment.c();i.intro&&rn(n.$$.fragment),an(n,i.target,i.anchor),ke()}dt(l)}class dn{constructor(){h(this,"$$");h(this,"$$set")}$destroy(){ln(this,1),this.$destroy=ht}$on(i,t){if(!we(t))return ht;const e=this.$$.callbacks[i]||(this.$$.callbacks[i]=[]);return e.push(t),()=>{const s=e.indexOf(t);s!==-1&&e.splice(s,1)}}$set(i){this.$$set&&!Xe(i)&&(this.$$.skip_bound=!0,this.$$set(i),this.$$.skip_bound=!1)}}const hn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(hn);const fn={functions:{visualize:{inputs:["Video ID","Show Controls"],outputs:[],functionInit:n=>{n.yt=n.dom.querySelector(".yt")},functionUpdate:(n,i,t)=>{i||(i="m4-HM_sCvtQ"),n.yt.src="https://www.youtube.com/embed/"+i+"?autoplay=1&controls="+(t?"1":"0")}}},elements:[{type:"input-text",name:"Video ID"},{type:"input-bool",name:"Show Controls"},{type:"custom",html:`
        <iframe class="yt rounded-lg" width="560" height="315" src="https://www.youtube.com/embed/m4-HM_sCvtQ?autoplay=1&controls=0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      `}]},pn={functions:{output:{inputs:["Input 1","Input 2","Operation"],outputs:["Result"],functionUpdate:(n,i,t,e)=>{switch(e){case"+":return i+t;case"-":return i-t;case"*":return i*t;case"/":return i/t;default:return 0}}}},elements:[{type:"output-text",name:"Result"},[{type:"ui-dropdown",name:"Operation",values:[{value:"+",label:"Add"},{value:"-",label:"Subtract"},{value:"*",label:"Multiply"},{value:"/",label:"Divide"}]}],[{type:"input-text",name:"Input 1"}],[{type:"input-text",name:"Input 2"}]]},mn={functions:{output:{inputs:["Min","Max","Value"],outputs:["Result"],functionUpdate:(n,i,t,e)=>Math.min(Math.max(i,e),t)}},elements:[{type:"output-text",name:"Result"},{type:"input-float-infinite",name:"Min"},{type:"input-float-infinite",name:"Max"},{type:"input-float-infinite",name:"Value"}]},gn={functions:{output:{inputs:["Input 1","Input 2","Alpha"],outputs:["Result"],functionUpdate:(n,i,t,e)=>(i=parseFloat(i),t=parseFloat(t),e=parseFloat(e),i+(t-i)*e)}},elements:[{type:"output-text",name:"Result"},{type:"input-text",name:"Input 1"},{type:"input-text",name:"Input 2"},{type:"input-float",name:"Alpha",min:0,max:1}]},vn={functions:{output:{inputs:["Input 1"],outputs:["Result"],functionUpdate:(n,i)=>parseFloat(i)}},elements:[{type:"output-text",name:"Result"},{type:"input-float-infinite",name:"Input 1"}]},_n={functions:{output:{inputs:["Input"],outputs:[],functionInit:(n,i)=>{n.display=n.dom.querySelector(".display")},functionUpdate:(n,i)=>{n.display.innerText=i}}},elements:[{type:"custom",name:"Display",html:`
      <div class="bg-white w-full">
        Display
      </div>
      `},{type:"input-text",name:"Input"},{type:"custom",name:"Display",html:`
      <div class="bg-red rounded-lg">
        <span class="display text-3xl"></span>
      </div>
      `}]};function he(n,i,t){return n>=i&&n<=t||n>=t&&n<=i}function fe(n,i,t){const e=t.zoom,s=t.zoom,o=-n*t.zoom+t.cameraWidth/2,r=-i*t.zoom+t.cameraHeight/2;return`${e},0,0,0,0,${s},0,0,0,0,1,0,${o},${r},0,1`}function mt(n,i){if(i.name==="")return;const t=document.createElement("span");return t.classList.add("sl-label"),t.innerText=i.name,t.style.zIndex="99",n.appendChild(t),t}class Ee{constructor(i){h(this,"g");h(this,"gid");h(this,"position_x");h(this,"position_y");this.g=i,i.gid++,this.gid=i.gid.toString(),this.position_x=0,this.position_y=0}bindFunction(i){i.onmousedown=this.domMouseDown.bind(this)}domMouseDown(i){console.debug(this),this.g.isMouseDown=!0,this.g.targetNode=this,this.g.mousedown_x=i.clientX,this.g.mousedown_y=i.clientY,this.g.dx=0,this.g.dy=0,this.g.dx_offset=0,this.g.dy_offset=0,this.onFocus(),this.customMouseDown(i),i.stopPropagation()}customMouseDown(i){console.debug(i)}domMouseUp(){}onFocus(){}offFocus(){}onDrag(){}onPan(){}}class gt extends Ee{constructor(t,e,s){super(s);h(this,"parent");h(this,"config");h(this,"dom");this.config=t,this.parent=e,this.dom=null}}class Ie extends gt{constructor(t,e,s){super(t,e,s);h(this,"connector_x");h(this,"connector_y");h(this,"c_total_offset_x");h(this,"c_total_offset_y");h(this,"name");this.connector_x=0,this.connector_y=0,this.c_total_offset_x=0,this.c_total_offset_y=0,this.dom=null,t.name?this.name=t.name:(s.gid++,this.name=s.gid.toString()),this.g.globalNodes[this.gid]=this}pxToInt(t){return parseInt(t.substring(0,t.length-2))}getComputed(t,e){const s=window.getComputedStyle(t,null).getPropertyValue(e);return s.endsWith("px")?this.pxToInt(s):parseInt(s)}updateDOMproperties(){let e=this.dom.getBoundingClientRect(),s=this.parent.dom.getBoundingClientRect();this.c_total_offset_x=(e.left-s.left)/this.g.zoom+e.width/2/this.g.zoom,this.c_total_offset_y=(e.top-s.top)/this.g.zoom+e.height/2/this.g.zoom}setLineXY(t,e,s){t.setAttribute("x1","0"),t.setAttribute("y1","0"),t.setAttribute("x2",""+e),t.setAttribute("y2",""+s),t.setAttribute("stroke-width","4")}}class yn extends Ie{constructor(t,e,s,o){super(t,e,s);h(this,"inputDOM");h(this,"inter");h(this,"peerOutput");this.inter=o,this.inputDOM=null,this.peerOutput=null;const r=document.createElement("span");r.classList.add("sl-input-connector"),r.id=`input-${this.gid}`,r.onmousedown=this.domMouseDown.bind(this),this.dom=r}domMouseDown(t){this.peerOutput&&(super.domMouseDown(t),this.g.targetNode=this.peerOutput,this.g.dx_offset=(this.connector_x-this.peerOutput.connector_x)*this.g.zoom,this.g.dy_offset=(this.connector_y-this.peerOutput.connector_y)*this.g.zoom,this.g.dx=this.g.dx_offset,this.g.dy=this.g.dy_offset,this.peerOutput.customMouseDown(t),this.peerOutput.disconnectFromInput(this),t.stopPropagation())}updateConnectorPosition(){this.connector_x=this.parent.position_x+this.c_total_offset_x,this.connector_y=this.parent.position_y+this.c_total_offset_y}disconnectFromOutput(){var t,e;this.peerOutput=null,this.inter.dom.classList.remove("connected"),(e=(t=this.inter.inputUI)==null?void 0:t.inputDOM)==null||e.setAttribute("disabled","false")}connectToOutput(t){var e,s,o;this.peerOutput=t,(e=this.inter.dom)==null||e.classList.add("connected"),(o=(s=this.inter.inputUI)==null?void 0:s.inputDOM)==null||o.setAttribute("disabled","true")}nodeDrag(){this.updateConnectorPosition(),this.peerOutput&&this.peerOutput.nodeDrag()}}class bn extends Ie{constructor(t,e,s){super(t,e,s);h(this,"val");h(this,"svgTmp");h(this,"svgs");this.val=null,this.svgTmp={svg:null,line:null},this.svgs=[];const o=document.createElement("span");o.classList.add("sl-output-connector"),o.id=`output-${this.gid}`,o.onmousedown=this.domMouseDown.bind(this),this.dom=o}connectToInput(t){if(console.debug("Connecting to input: ",t),this===t.peerOutput){console.debug("Already connected");return}t.peerOutput&&(console.debug("Disconnecting from: ",t.peerOutput),t.peerOutput.disconnectFromInput(t),t.disconnectFromOutput()),console.debug("Now connecting to: ",t),t.connectToOutput(this);const e=this.createNewSVG(),s=e[0],o=e[1],r={svg:s,line:o,to:t,from:this,connector_x:this.connector_x,connector_y:this.connector_y,x2:0,y2:0,connector:this};this.svgs.push(r),this.g.globalLines.push(r),this.g.canvas.appendChild(s),this.setLineXY(o,t.connector_x-this.connector_x,t.connector_y-this.connector_y),this.parent.outputCount++,t.parent.inputCount++}disconnectFromInput(t){console.debug("Disconnecting from input: ",t);for(const e of this.svgs)if(e.to==t){this.g.canvas.removeChild(e.svg),this.svgs=this.svgs.filter(s=>s!=e),this.g.globalLines=this.g.globalLines.filter(s=>s!=e),console.debug("Deleted line: ",e);break}t.disconnectFromOutput(),this.parent.outputCount--,t.parent.inputCount--}updateConnectorPosition(){this.connector_x=this.parent.position_x+this.c_total_offset_x,this.connector_y=this.parent.position_y+this.c_total_offset_y}moveToParent(){if(this.updateConnectorPosition(),this.svgTmp.line&&(this.svgTmp.svg.style.transform=`translate3d(${this.connector_x}px, ${this.connector_y}px, 0)`),!(this.svgs.length<1))for(const t of this.svgs)t.svg.style.transform=`translate3d(${this.connector_x}px, ${this.connector_y}px, 0)`,t.connector_x=this.connector_x,t.connector_y=this.connector_y,t.x2=t.to.connector_x-this.connector_x,t.y2=t.to.connector_y-this.connector_y,this.setLineXY(t.line,t.x2,t.y2)}createNewSVG(){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.classList.add("sl-connector-svg"),t.style.pointerEvents="none",t.style.position="absolute",t.style.overflow="visible",t.setAttribute("width","4"),t.setAttribute("height","4"),t.style.willChange="transform";const e=document.createElementNS("http://www.w3.org/2000/svg","line");return e.classList.add("sl-connector-line"),e.setAttribute("stroke-width","4"),t.appendChild(e),this.updateConnectorPosition(),console.debug("connector x: "+this.connector_x),t.style.transform=`translate3d(${this.connector_x}px, ${this.connector_y}px, 0)`,this.g.canvas.appendChild(t),[t,e]}customMouseDown(t){const e=this.createNewSVG();this.svgTmp.svg=e[0],this.svgTmp.line=e[1],this.moveToParent(),this.setLineXY(this.svgTmp.line,this.g.dx,this.g.dy)}onDrag(){let t=9999,e=0,s=0;const o=this.g.hoverDOM;if(o&&o.id&&o.id.startsWith("input-")){const r=o.id.split("-")[1],a=this.g.globalNodes[r];a.updateConnectorPosition(),e=a.connector_x,s=a.connector_y,t=Math.sqrt(Math.pow(this.connector_x+this.g.dx/this.g.zoom-e,2)+Math.pow(this.connector_y+this.g.dy/this.g.zoom-s,2))}t<40?this.setLineXY(this.svgTmp.line,e-this.connector_x,s-this.connector_y):this.setLineXY(this.svgTmp.line,this.g.dx/this.g.zoom,this.g.dy/this.g.zoom)}nodeDrag(){this.moveToParent()}domMouseUp(){const t=this.g.hoverDOM;if(t&&t.id&&t.id.startsWith("input-")){console.debug("Connecting to input: ",t.id);const e=this.g.globalNodes[t.id.split("-")[1]];this.connectToInput(e),e.parent.run()}this.g.canvas.removeChild(this.svgTmp.svg),this.svgTmp={svg:null,line:null}}getValue(){return this.parent.exec(),this.val}}class Ot extends gt{constructor(t,e,s,o){super(t,e,s);h(this,"inputDOM");h(this,"inputItf");this.inputDOM=null,this.inputItf=o}triggerExec(t){var e;(e=this.inputItf.parent)==null||e.run()}}class xn extends Ot{constructor(i,t,e,s){super(i,t,e,s),mt(s.dom,i);const o=document.createElement("input");o.classList.add("sl-input-text"),o.type="text",s.dom.appendChild(o),this.inputDOM=o,o.onkeyup=this.triggerExec.bind(this)}getInputValue(){return this.inputDOM.value}}class wn extends Ot{constructor(i,t,e,s){super(i,t,e,s),mt(s.dom,i);const o=document.createElement("input");o.classList.add("sl-input-bool"),o.type="checkbox",s.dom.appendChild(o),this.inputDOM=o,o.onkeyup=this.triggerExec.bind(this)}getInputValue(){return this.inputDOM.checked}}class Cn extends Ot{constructor(t,e,s,o){super(t,e,s,o);h(this,"cur_w");h(this,"x_cur");h(this,"x_min");h(this,"x_max");h(this,"slider_w");h(this,"floatSliderContainer");h(this,"floatSlider");h(this,"floatEditor");h(this,"floatContainer");this.x_cur=0,this.x_min="x_min"in t?t.x_min:0,this.x_max="x_max"in t?t.x_max:this.x_min+1,this.slider_w=0,this.cur_w=0;const r=document.createElement("div"),a=document.createElement("input"),l=document.createElement("div"),c=document.createElement("div");r.classList.add("sl-input-float-container"),r.style.position="relative",r.style.overflow="hidden",r.style.flexGrow="1",r.style.display="flex",a.classList.add("sl-input-float-editor"),a.style.backgroundColor="transparent",a.style.position="relative",a.style.width="100%",a.type="text",a.style.textAlign="right",a.style.zIndex="10",l.classList.add("sl-input-float-slider-container"),l.style.position="relative",l.style.zIndex="1",l.style.overflow="hidden",c.classList.add("sl-input-float-slider"),c.style.width="10px",c.style.height="100%",c.style.top="0px",c.style.left="0",c.style.position="absolute",c.style.zIndex="10",l.appendChild(c),mt(r,t),r.appendChild(l),l.appendChild(a),o.dom.appendChild(r),this.inputDOM=a,a.onchange=this.triggerExec.bind(this),c.onmousedown=this.triggerExec.bind(this),this.floatSlider=c,this.floatEditor=a,this.floatContainer=r,this.floatSliderContainer=l,this.bindFunction(r)}customMouseDown(){this.cur_w=parseInt(this.floatSlider.style.width,10),this.slider_w=this.floatSliderContainer.getBoundingClientRect().width/this.g.zoom,console.log(this.slider_w),this.floatEditor.blur()}onDrag(){var r;this.floatEditor.blur();const t=50,e=(this.x_max-this.x_min)/t,s=this.slider_w/t;let o=this.cur_w+this.g.dx/this.g.zoom;o=Math.ceil(o/s)*s,o=Math.min(Math.max(o,0),this.slider_w),this.floatSlider.style.width=o+"px",this.x_cur=Math.min(Math.max(this.x_min+o/this.slider_w,this.x_min),this.x_max),this.x_cur=Math.ceil(this.x_cur/e)*e,this.floatEditor.value=this.x_cur.toFixed(3),(r=this.inputItf.parent)==null||r.run()}domMouseUp(){this.floatEditor.focus()}getInputValue(){return parseFloat(this.inputDOM.value)}}class kn extends Ot{constructor(t,e,s,o){super(t,e,s,o);h(this,"x_cur");h(this,"floatSliderContainer");h(this,"floatEditor");h(this,"floatContainer");this.x_cur=0;const r=document.createElement("div"),a=document.createElement("input"),l=document.createElement("div");r.classList.add("sl-input-float-container"),r.style.position="relative",r.style.overflow="hidden",r.style.flexGrow="1",r.style.display="flex",a.classList.add("sl-input-float-editor"),a.style.backgroundColor="transparent",a.style.position="relative",a.style.width="100%",a.type="text",a.style.textAlign="right",a.style.zIndex="10",l.classList.add("sl-input-float-slider-container"),l.style.position="relative",l.style.zIndex="1",l.style.overflow="hidden",mt(r,t),r.appendChild(l),l.appendChild(a),o.dom.appendChild(r),this.inputDOM=a,a.onchange=this.triggerExec.bind(this),this.floatEditor=a,this.floatContainer=r,this.floatSliderContainer=l,this.bindFunction(r)}customMouseDown(){this.x_cur=parseFloat(this.floatEditor.value)||0,this.floatEditor.blur()}onDrag(){var s;this.floatEditor.blur();const t=.1;let e=Math.ceil((this.x_cur+this.g.dx*.1)/t)*t;this.floatEditor.value=e.toFixed(3),(s=this.inputItf.parent)==null||s.run()}domMouseUp(){this.floatEditor.focus()}getInputValue(){return parseFloat(this.inputDOM.value)}}class Se extends gt{constructor(t,e,s){super(t,e,s);h(this,"name");this.name=t.name,this.parent.elements[this.name]=this}}class En extends Se{constructor(t,e,s){super(t,e,s);h(this,"input");h(this,"inputUI");h(this,"name");const o=document.createElement("div");switch(o.classList.add("sl-input"),o.style.position="relative",this.input=new yn(t,e,s,this),o.appendChild(this.input.dom),this.dom=o,this.name=t.name,this.parent.elements[this.name]=this,t.type){case"input-text":this.inputUI=new xn(t,e,s,this);break;case"input-bool":this.inputUI=new wn(t,e,s,this);break;case"input-float":this.inputUI=new Cn(t,e,s,this);break;case"input-float-infinite":this.inputUI=new kn(t,e,s,this);break;default:this.inputUI=null}this.bindFunction(this.dom)}getValue(){return this.input.peerOutput?this.input.peerOutput.getValue():this.inputUI?this.inputUI.getInputValue():null}}class In extends Se{constructor(t,e,s){super(t,e,s);h(this,"output");h(this,"name");const o=document.createElement("div");o.classList.add("sl-output"),o.style.position="relative",mt(o,t),this.output=new bn(t,e,s),o.appendChild(this.output.dom),this.dom=o,this.name=t.name,this.parent.elements[this.name]=this}getValue(){return this.parent.exec(),this.output.val}setValue(t){this.output.val=t}}class Sn extends gt{constructor(t,e,s,o){super(t,e,s);h(this,"parentContent");h(this,"getUIvalue");h(this,"setUIvalue");h(this,"name");this.parentContent=o,this.name=t.name,this.getUIvalue=()=>null,this.setUIvalue=l=>{console.debug(l)};const r=document.createElement("div");switch(r.classList.add("sl-ui"),t.type){case"ui-paragraph":const l=document.createElement("p");l.style.pointerEvents="none",l.innerText=t.text,r.appendChild(l);break;case"ui-display":const c=document.createElement("p");c.style.pointerEvents="none",c.innerText="Output",r.appendChild(c),this.setSetFunction(u=>{c.innerText=u});break;case"ui-dropdown":const d=document.createElement("select");d.classList.add("sl-ui-dropdown");for(const u of t.values){const f=document.createElement("option");f.innerText=u.label,f.value=u.value,d.appendChild(f)}r.appendChild(d),this.setGetFunction(()=>d.value),this.setExecTrigger(d,"change");break}this.dom=r,this.name&&(this.parent.elements[this.name]=this)}setExecTrigger(t,e){t.addEventListener(e,()=>{var s;(s=this.parent)==null||s.run()}),console.debug(t,e)}setGetFunction(t){this.getUIvalue=t}setSetFunction(t){this.setUIvalue=t}getValue(){return this.getUIvalue()}setValue(t){return this.setUIvalue(t)}}class Mn extends gt{constructor(t,e,s,o){super(t,e,s);h(this,"parentContent");h(this,"getUIvalue");h(this,"setUIvalue");this.parentContent=o,this.getUIvalue=()=>null,this.setUIvalue=a=>{console.debug(a)};const r=document.createElement("template");r.innerHTML=t.html.trim(),this.dom=r.content.firstChild}setExecTrigger(t,e){console.debug(t,e)}setGetFunction(t){this.getUIvalue=t}setSetFunction(t){this.setUIvalue=t}getValue(){return this.getUIvalue()}setValue(t){return this.setUIvalue(t)}}class zt extends Ee{constructor(t,e,s=0,o=0){super(e);h(this,"config");h(this,"inputs");h(this,"outputs");h(this,"inputCount");h(this,"outputCount");h(this,"elements");h(this,"dom");h(this,"hasIandO");h(this,"nodeWidth");h(this,"nodeHeight");h(this,"nodeContainerWidth");h(this,"nodeContainerHeight");h(this,"nodeContainerOffsetLeft");h(this,"nodeContainerOffsetTop");h(this,"functions");h(this,"pan_start_x");h(this,"pan_start_y");h(this,"overlapping");h(this,"freeze");this.config=t,this.position_x=s,this.position_y=o,this.inputs=[],this.outputs=[],this.inputCount=0,this.outputCount=0,this.elements={},this.pan_start_x=this.position_x,this.pan_start_y=this.position_y,this.overlapping=null,this.freeze=!1;const r=document.createElement("div");r.classList.add("sl-node"),r.style.willChange="transform",r.style.position="absolute",r.style.transformOrigin="top left",r.style.position="absolute";const a=document.createElement("div");a.classList.add("sl-node-container"),a.style.position="relative";for(const l of t.elements){const c=document.createElement("div");if(c.style.position="relative",c.style.display="flex",c.style.flexDirection="row",c.classList.add("sl-node-content"),a.appendChild(c),l instanceof Array)for(const d of l){const u=this._initParseComponent(d,c);u&&c.appendChild(u.dom)}else{const d=this._initParseComponent(l,c);d&&c.appendChild(d.dom)}a.appendChild(c)}if(r.appendChild(a),r.id=this.gid,r.onmousedown=this.domMouseDown.bind(this),this.dom=r,this.inputs.length>0&&this.outputs.length>0?this.hasIandO=!0:this.hasIandO=!1,this.g.canvas.appendChild(r),this.nodeWidth=r.offsetWidth,this.nodeHeight=r.offsetHeight,this.nodeContainerWidth=a.offsetWidth,this.nodeContainerHeight=a.offsetHeight,this.nodeContainerOffsetLeft=a.offsetLeft,this.nodeContainerOffsetTop=a.offsetTop,this.updateDOMproperties(),this.g.nodeArray.push(this),new ResizeObserver(()=>{this.updateDOMproperties()}).observe(this.dom),this.functions=[],t.functions){this.functions=t.functions;for(const[l,c]of Object.entries(this.functions))c.functionInit!==void 0&&c.functionInit(this)}}findInput(t){for(const e of this.inputs)if(e.gid===t)return e;return null}findOutput(t){for(const e of this.outputs)if(e.gid===t)return e;return null}_initParseComponent(t,e){let s=null;switch(t.type){case"input-text":case"input-bool":case"input-float":case"input-float-infinite":s=new En(t,this,this.g),s.parent=this,this.g.globalNodes[s.gid]=s,this.inputs.push(s);break;case"output-text":s=new In(t,this,this.g),s.parent=this,this.g.globalNodes[s.gid]=s,this.outputs.push(s);break;case"ui-display":case"ui-dropdown":case"ui-paragraph":s=new Sn(t,this,this.g,e),s.parent=this,this.g.globalNodes[s.gid]=s;break;case"custom":s=new Mn(t,this,this.g,e),s.parent=this,this.g.globalNodes[s.gid]=s;break;default:console.warn("Unknown type "+t.type)}return s}customMouseDown(t){this.pan_start_x=this.position_x,this.pan_start_y=this.position_y,this.g.focusNode=this}domMouseUp(){if(this.freeze||(this.position_x=this.pan_start_x+this.g.dx/this.g.zoom,this.position_y=this.pan_start_y+this.g.dy/this.g.zoom,this.overlapping==null))return;const t=this.overlapping.from,e=this.overlapping.to,s=this.inputs[0],o=this.outputs[0];t.disconnectFromInput(e),t.connectToInput(s.input),o.output.connectToInput(e)}onDrag(){if(this.freeze)return;this.position_x=this.pan_start_x+this.g.dx/this.g.zoom,this.position_y=this.pan_start_y+this.g.dy/this.g.zoom,this.dom.style.transform=`translate3d(${this.position_x}px, ${this.position_y}px, 0)`;for(const e of this.inputs)e.input.nodeDrag();for(const e of this.outputs)e.output.nodeDrag();if(this.overlapping=null,!this.hasIandO||this.outputCount>0||this.inputCount>0)return;let t=9999;for(const e of this.g.globalLines)e.line.classList.remove("overlapping"),he(this.position_x+this.nodeWidth/2,e.connector_x,e.connector_x+e.x2)&&he(this.position_y+this.nodeHeight/2,e.connector_y,e.connector_y+e.y2)&&(e.y2+e.connector_x)/2<t&&(this.overlapping=e,t=(e.y2+this.position_y)/2);this.overlapping&&this.overlapping.line.classList.add("overlapping")}onFocus(){for(const t of this.g.nodeArray)t.dom.classList.remove("focused"),t.dom.style.zIndex="10";this.dom.classList.add("focused"),this.dom.style.zIndex="20",this.updateDOMproperties()}offFocus(){this.dom.classList.remove("focused"),this.dom.style.zIndex="10"}updateDOMproperties(){this.nodeHeight=this.dom.offsetHeight,this.nodeWidth=this.dom.offsetWidth;for(const t of this.inputs)t.input.updateDOMproperties();for(const t of this.outputs)t.output.updateDOMproperties()}run(){var e;let t=0;for(const[s,o]of Object.entries(this.functions))for(const r of o.outputs){const a=this.elements[r];if(a==null){console.warn(`Output '${r}' was not found in elements. Double check '${r}' is defined.`);return}if(!(!a.output.svgs||a.output.svgs.length<1)){t++;for(const l of a.output.svgs)(e=l.to.parent)==null||e.run()}}t===0&&this.exec()}exec(){if(this.functions)for(const[t,e]of Object.entries(this.functions)){const s=[this];for(const a of e.inputs)if(a in this.elements){const l=this.elements[a];s.push(l.getValue())}const o=e.functionUpdate(...s);let r=0;for(const a of e.outputs){const l=this.elements[a];if(l==null){console.warn(`Output '${a}' was not found in elements. Double check '${a}' is defined.`);return}o instanceof Array?l.setValue(o[r++]):l.setValue(o)}}}}class On{constructor(i){h(this,"g");this.g={canvas:null,canvasContainer:null,canvasBackground:null,isMouseDown:!1,mousedown_x:0,mousedown_y:0,mouse_x:0,mouse_y:0,mouse_x_world:0,mouse_y_world:0,camera_pan_start_x:0,camera_pan_start_y:0,dx:0,dy:0,dx_offset:0,dy_offset:0,overrideDrag:!1,camera_x:0,camera_y:0,zoom:1,cameraWidth:0,cameraHeight:0,targetNode:null,focusNode:null,hoverDOM:null,gid:0,nodeArray:[],globalLines:[],globalNodes:{}};const t=this.g;if(t.canvasContainer=document.getElementById(i),!t.canvasContainer){console.error("Canvas not found");return}t.cameraWidth=t.canvasContainer.clientWidth,t.cameraHeight=t.canvasContainer.clientHeight,console.debug(`Canvas size: ${t.cameraWidth}x${t.cameraHeight}`);const e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.className="canvas",t.canvasContainer.appendChild(e),t.canvas=e,t.canvas.style.transform=`translate(${t.cameraWidth/2}px, ${t.cameraHeight/2}px)`,t.canvasContainer.tabIndex=0;const s=document.createElement("div");s.id="sl-background",s.style.width=t.cameraWidth*10+"px",s.style.height=t.cameraHeight*10+"px",s.style.transform=`translate(${-t.cameraWidth*5}px, ${-t.cameraHeight*5}px)`,s.style.transformOrigin="center",s.style.zIndex="0",s.style.position="absolute",t.canvas.appendChild(s),t.canvasBackground=s,t.canvasContainer.addEventListener("mousedown",function(o){if(!t.overrideDrag){t.isMouseDown=!0,t.mousedown_x=o.clientX,t.mousedown_y=o.clientY,t.camera_pan_start_x=t.camera_x,t.camera_pan_start_y=t.camera_y;for(const r of t.nodeArray)r.offFocus()}}),t.canvasContainer.addEventListener("mousemove",this.onMouseMove.bind(this)),t.canvasContainer.addEventListener("wheel",function(o){let r=1*t.zoom*(-o.deltaY/600);o.preventDefault(),t.zoom+r<.2?(t.zoom=.2,r=0):t.zoom+r>3&&(t.zoom=3,r=0);const a=(t.mouse_x-t.cameraWidth/2)*r,l=(t.mouse_y-t.cameraHeight/2)*r;t.zoom+=r,t.camera_x+=a/t.zoom/t.zoom,t.camera_y+=l/t.zoom/t.zoom,t.canvas.style.transform=`matrix3d(${fe(t.camera_x,t.camera_y,t)})`,o.preventDefault()}),t.canvasContainer.addEventListener("mouseup",function(o){t.overrideDrag&&(t.canvasBackground.style.cursor="default"),t.overrideDrag=!1,t.isMouseDown=!1,t.canvas.style.cursor="default",t.targetNode==null||t.targetNode.domMouseUp(),t.targetNode=null,t.dx=0,t.dy=0,t.dx_offset=0,t.dy_offset=0}),t.canvasContainer.addEventListener("keydown",o=>{switch(console.debug("Keydown: "+o.key),o.key){case"Backspace":case"Delete":t.focusNode&&(console.debug("Delete Node "+t.focusNode.gid),this.deleteNode(t.focusNode.gid));break}}),console.info("Initialized SnapLine..."),window.requestAnimationFrame(this.step.bind(this))}onMouseMove(i){const t=this.g;t.hoverDOM=i.target,t.mouse_x=i.clientX-t.canvasContainer.offsetLeft,t.mouse_y=i.clientY-t.canvasContainer.offsetTop;let e=(t.mouse_x-t.cameraWidth/2)/t.zoom+t.camera_x,s=(t.mouse_y-t.cameraHeight/2)/t.zoom+t.camera_y;t.mouse_x_world=e,t.mouse_y_world=s,(t.isMouseDown||t.overrideDrag)&&(t.dx=i.clientX-t.mousedown_x+t.dx_offset,t.dy=i.clientY-t.mousedown_y+t.dy_offset,t.targetNode==null&&(t.camera_x=t.camera_pan_start_x-t.dx/t.zoom,t.camera_y=t.camera_pan_start_y-t.dy/t.zoom,t.canvas.style.transform=`matrix3d(${fe(t.camera_x,t.camera_y,t)})`,t.canvasBackground.style.transform=`translate(${t.camera_x+-t.cameraWidth*5}px, ${t.camera_y+-t.cameraHeight*5}px)`,t.canvasBackground.style.backgroundPosition=`${-t.camera_x}px ${-t.camera_y}px`,t.canvas.style.cursor="grabbing"))}step(){this.g.targetNode&&this.g.targetNode.onDrag(),window.requestAnimationFrame(this.step.bind(this))}addNode(i,t,e){const s=new zt(i,this.g,t,e);return this.g.globalNodes[s.gid]=s,this.focusNode(s.gid),s}addNodeAtMouse(i,t){let e=this.g.mouse_x_world,s=this.g.mouse_y_world,o=this.addNode(i,e,s);this.g.isMouseDown=!0,this.g.mousedown_x=this.g.mouse_x,this.g.mousedown_y=this.g.mouse_y,this.g.camera_pan_start_x=this.g.camera_x,this.g.camera_pan_start_y=this.g.camera_y,this.g.overrideDrag=!0,this.g.focusNode=o,this.g.targetNode=o;for(const r of this.g.nodeArray)r.offFocus();this.onMouseMove(t),this.g.canvasBackground.style.cursor="none"}deleteNode(i){var e;if(!(i in this.g.globalNodes))return null;const t=this.g.globalNodes[i];return(e=this.g.canvas)==null||e.removeChild(t.dom),delete this.g.globalNodes[i],i}focusNode(i){return i in this.g.globalNodes?(this.g.globalNodes[i].onFocus(),i):null}connectNodes(i,t,e,s){const o=this.g.globalNodes[i],r=this.g.globalNodes[e];if(!o||!r||!(o instanceof zt)||!(r instanceof zt))return null;const a=o.findOutput(t),l=r.findInput(s);return!a||!l?null:(a.output.connectToInput(l.input),0)}}/*!
 * iro.js v5.5.2
 * 2016-2021 James Daniel
 * Licensed under MPL 2.0
 * github.com/jaames/iro.js
 */var k,It,Me,Bt,Oe,z={},Gt=[],Dn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function P(n,i){for(var t in i)n[t]=i[t];return n}function De(n){var i=n.parentNode;i&&i.removeChild(n)}function b(n,i,t){var e,s,o,r,a=arguments;if(i=P({},i),arguments.length>3)for(t=[t],e=3;e<arguments.length;e++)t.push(a[e]);if(t!=null&&(i.children=t),n!=null&&n.defaultProps!=null)for(s in n.defaultProps)i[s]===void 0&&(i[s]=n.defaultProps[s]);return r=i.key,(o=i.ref)!=null&&delete i.ref,r!=null&&delete i.key,jt(n,i,r,o)}function jt(n,i,t,e){var s={type:n,props:i,key:t,ref:e,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return k.vnode&&k.vnode(s),s}function Dt(n){return n.children}function Nn(n){if(n==null||typeof n=="boolean")return null;if(typeof n=="string"||typeof n=="number")return jt(null,n,null,null);if(n.__e!=null||n.__c!=null){var i=jt(n.type,n.props,n.key,null);return i.__e=n.__e,i}return n}function nt(n,i){this.props=n,this.context=i}function St(n,i){if(i==null)return n.__p?St(n.__p,n.__p.__k.indexOf(n)+1):null;for(var t;i<n.__k.length;i++)if((t=n.__k[i])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?St(n):null}function Ne(n){var i,t;if((n=n.__p)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,i=0;i<n.__k.length;i++)if((t=n.__k[i])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return Ne(n)}}function Ht(n){(!n.__d&&(n.__d=!0)&&It.push(n)===1||Bt!==k.debounceRendering)&&(Bt=k.debounceRendering,(k.debounceRendering||Me)(An))}function An(){var n,i,t,e,s,o,r,a;for(It.sort(function(l,c){return c.__v.__b-l.__v.__b});n=It.pop();)n.__d&&(t=void 0,e=void 0,o=(s=(i=n).__v).__e,r=i.__P,a=i.u,i.u=!1,r&&(t=[],e=Yt(r,s,P({},s),i.__n,r.ownerSVGElement!==void 0,null,t,a,o??St(s)),Te(t,s),e!=o&&Ne(s)))}function Ae(n,i,t,e,s,o,r,a,l){var c,d,u,f,p,y,_,E=t&&t.__k||Gt,x=E.length;if(a==z&&(a=o!=null?o[0]:x?St(t,0):null),c=0,i.__k=Xt(i.__k,function(w){if(w!=null){if(w.__p=i,w.__b=i.__b+1,(u=E[c])===null||u&&w.key==u.key&&w.type===u.type)E[c]=void 0;else for(d=0;d<x;d++){if((u=E[d])&&w.key==u.key&&w.type===u.type){E[d]=void 0;break}u=null}if(f=Yt(n,w,u=u||z,e,s,o,r,null,a,l),(d=w.ref)&&u.ref!=d&&(_||(_=[])).push(d,w.__c||f,w),f!=null){if(y==null&&(y=f),w.l!=null)f=w.l,w.l=null;else if(o==u||f!=a||f.parentNode==null){t:if(a==null||a.parentNode!==n)n.appendChild(f);else{for(p=a,d=0;(p=p.nextSibling)&&d<x;d+=2)if(p==f)break t;n.insertBefore(f,a)}i.type=="option"&&(n.value="")}a=f.nextSibling,typeof i.type=="function"&&(i.l=f)}}return c++,w}),i.__e=y,o!=null&&typeof i.type!="function")for(c=o.length;c--;)o[c]!=null&&De(o[c]);for(c=x;c--;)E[c]!=null&&Le(E[c],E[c]);if(_)for(c=0;c<_.length;c++)$e(_[c],_[++c],_[++c])}function Xt(n,i,t){if(t==null&&(t=[]),n==null||typeof n=="boolean")i&&t.push(i(null));else if(Array.isArray(n))for(var e=0;e<n.length;e++)Xt(n[e],i,t);else t.push(i?i(Nn(n)):n);return t}function Tn(n,i,t,e,s){var o;for(o in t)o in i||me(n,o,null,t[o],e);for(o in i)s&&typeof i[o]!="function"||o==="value"||o==="checked"||t[o]===i[o]||me(n,o,i[o],t[o],e)}function pe(n,i,t){i[0]==="-"?n.setProperty(i,t):n[i]=typeof t=="number"&&Dn.test(i)===!1?t+"px":t??""}function me(n,i,t,e,s){var o,r,a,l,c;if(!((i=s?i==="className"?"class":i:i==="class"?"className":i)==="key"||i==="children"))if(i==="style")if(o=n.style,typeof t=="string")o.cssText=t;else{if(typeof e=="string"&&(o.cssText="",e=null),e)for(r in e)t&&r in t||pe(o,r,"");if(t)for(a in t)e&&t[a]===e[a]||pe(o,a,t[a])}else i[0]==="o"&&i[1]==="n"?(l=i!==(i=i.replace(/Capture$/,"")),c=i.toLowerCase(),i=(c in n?c:i).slice(2),t?(e||n.addEventListener(i,ge,l),(n.t||(n.t={}))[i]=t):n.removeEventListener(i,ge,l)):i!=="list"&&i!=="tagName"&&i!=="form"&&!s&&i in n?n[i]=t??"":typeof t!="function"&&i!=="dangerouslySetInnerHTML"&&(i!==(i=i.replace(/^xlink:?/,""))?t==null||t===!1?n.removeAttributeNS("http://www.w3.org/1999/xlink",i.toLowerCase()):n.setAttributeNS("http://www.w3.org/1999/xlink",i.toLowerCase(),t):t==null||t===!1?n.removeAttribute(i):n.setAttribute(i,t))}function ge(n){return this.t[n.type](k.event?k.event(n):n)}function Yt(n,i,t,e,s,o,r,a,l,c){var d,u,f,p,y,_,E,x,w,M,O=i.type;if(i.constructor!==void 0)return null;(d=k.__b)&&d(i);try{t:if(typeof O=="function"){if(x=i.props,w=(d=O.contextType)&&e[d.__c],M=d?w?w.props.value:d.__p:e,t.__c?E=(u=i.__c=t.__c).__p=u.__E:("prototype"in O&&O.prototype.render?i.__c=u=new O(x,M):(i.__c=u=new nt(x,M),u.constructor=O,u.render=Ln),w&&w.sub(u),u.props=x,u.state||(u.state={}),u.context=M,u.__n=e,f=u.__d=!0,u.__h=[]),u.__s==null&&(u.__s=u.state),O.getDerivedStateFromProps!=null&&P(u.__s==u.state?u.__s=P({},u.__s):u.__s,O.getDerivedStateFromProps(x,u.__s)),f)O.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&r.push(u);else{if(O.getDerivedStateFromProps==null&&a==null&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(x,M),!a&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(x,u.__s,M)===!1){for(u.props=x,u.state=u.__s,u.__d=!1,u.__v=i,i.__e=l!=null?l!==t.__e?l:t.__e:null,i.__k=t.__k,d=0;d<i.__k.length;d++)i.__k[d]&&(i.__k[d].__p=i);break t}u.componentWillUpdate!=null&&u.componentWillUpdate(x,u.__s,M)}for(p=u.props,y=u.state,u.context=M,u.props=x,u.state=u.__s,(d=k.__r)&&d(i),u.__d=!1,u.__v=i,u.__P=n,d=u.render(u.props,u.state,u.context),i.__k=Xt(d!=null&&d.type==Dt&&d.key==null?d.props.children:d),u.getChildContext!=null&&(e=P(P({},e),u.getChildContext())),f||u.getSnapshotBeforeUpdate==null||(_=u.getSnapshotBeforeUpdate(p,y)),Ae(n,i,t,e,s,o,r,l,c),u.base=i.__e;d=u.__h.pop();)u.__s&&(u.state=u.__s),d.call(u);f||p==null||u.componentDidUpdate==null||u.componentDidUpdate(p,y,_),E&&(u.__E=u.__p=null)}else i.__e=$n(t.__e,i,t,e,s,o,r,c);(d=k.diffed)&&d(i)}catch(H){k.__e(H,i,t)}return i.__e}function Te(n,i){for(var t;t=n.pop();)try{t.componentDidMount()}catch(e){k.__e(e,t.__v)}k.__c&&k.__c(i)}function $n(n,i,t,e,s,o,r,a){var l,c,d,u,f=t.props,p=i.props;if(s=i.type==="svg"||s,n==null&&o!=null){for(l=0;l<o.length;l++)if((c=o[l])!=null&&(i.type===null?c.nodeType===3:c.localName===i.type)){n=c,o[l]=null;break}}if(n==null){if(i.type===null)return document.createTextNode(p);n=s?document.createElementNS("http://www.w3.org/2000/svg",i.type):document.createElement(i.type),o=null}return i.type===null?f!==p&&(o!=null&&(o[o.indexOf(n)]=null),n.data=p):i!==t&&(o!=null&&(o=Gt.slice.call(n.childNodes)),d=(f=t.props||z).dangerouslySetInnerHTML,u=p.dangerouslySetInnerHTML,a||(u||d)&&(u&&d&&u.__html==d.__html||(n.innerHTML=u&&u.__html||"")),Tn(n,p,f,s,a),i.__k=i.props.children,u||Ae(n,i,t,e,i.type!=="foreignObject"&&s,o,r,z,a),a||("value"in p&&p.value!==void 0&&p.value!==n.value&&(n.value=p.value==null?"":p.value),"checked"in p&&p.checked!==void 0&&p.checked!==n.checked&&(n.checked=p.checked))),n}function $e(n,i,t){try{typeof n=="function"?n(i):n.current=i}catch(e){k.__e(e,t)}}function Le(n,i,t){var e,s,o;if(k.unmount&&k.unmount(n),(e=n.ref)&&$e(e,null,i),t||typeof n.type=="function"||(t=(s=n.__e)!=null),n.__e=n.l=null,(e=n.__c)!=null){if(e.componentWillUnmount)try{e.componentWillUnmount()}catch(r){k.__e(r,i)}e.base=e.__P=null}if(e=n.__k)for(o=0;o<e.length;o++)e[o]&&Le(e[o],i,t);s!=null&&De(s)}function Ln(n,i,t){return this.constructor(n,t)}function Rn(n,i,t){var e,s,o;k.__p&&k.__p(n,i),s=(e=t===Oe)?null:t&&t.__k||i.__k,n=b(Dt,null,[n]),o=[],Yt(i,e?i.__k=n:(t||i).__k=n,s||z,z,i.ownerSVGElement!==void 0,t&&!e?[t]:s?null:Gt.slice.call(i.childNodes),o,!1,t||z,e),Te(o,n)}k={},nt.prototype.setState=function(n,i){var t=this.__s!==this.state&&this.__s||(this.__s=P({},this.state));(typeof n!="function"||(n=n(t,this.props)))&&P(t,n),n!=null&&this.__v&&(this.u=!1,i&&this.__h.push(i),Ht(this))},nt.prototype.forceUpdate=function(n){this.__v&&(n&&this.__h.push(n),this.u=!0,Ht(this))},nt.prototype.render=Dt,It=[],Me=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Bt=k.debounceRendering,k.__e=function(n,i,t){for(var e;i=i.__p;)if((e=i.__c)&&!e.__p)try{if(e.constructor&&e.constructor.getDerivedStateFromError!=null)e.setState(e.constructor.getDerivedStateFromError(n));else{if(e.componentDidCatch==null)continue;e.componentDidCatch(n)}return Ht(e.__E=e)}catch(s){n=s}throw n},Oe=z;function ve(n,i){for(var t=0;t<i.length;t++){var e=i[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function Pn(n,i,t){return i&&ve(n.prototype,i),t&&ve(n,t),n}function T(){return T=Object.assign||function(n){for(var i=arguments,t=1;t<arguments.length;t++){var e=i[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},T.apply(this,arguments)}var zn="[-\\+]?\\d+%?",Hn="[-\\+]?\\d*\\.\\d+%?",W="(?:"+Hn+")|(?:"+zn+")",Re="[\\s|\\(]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")\\s*\\)?",Pe="[\\s|\\(]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")\\s*\\)?",Un=new RegExp("rgb"+Re),Fn=new RegExp("rgba"+Pe),Wn=new RegExp("hsl"+Re),Bn=new RegExp("hsla"+Pe),Nt="^(?:#?|0x?)",B="([0-9a-fA-F]{1})",j="([0-9a-fA-F]{2})",jn=new RegExp(Nt+B+B+B+"$"),qn=new RegExp(Nt+B+B+B+B+"$"),Vn=new RegExp(Nt+j+j+j+"$"),Gn=new RegExp(Nt+j+j+j+j+"$"),Xn=2e3,Yn=4e4,Et=Math.log,J=Math.round,ct=Math.floor;function $(n,i,t){return Math.min(Math.max(n,i),t)}function N(n,i){var t=n.indexOf("%")>-1,e=parseFloat(n);return t?i/100*e:e}function A(n){return parseInt(n,16)}function F(n){return n.toString(16).padStart(2,"0")}var tt=function(){function n(t,e){this.$={h:0,s:0,v:0,a:1},t&&this.set(t),this.onChange=e,this.initialValue=T({},this.$)}var i=n.prototype;return i.set=function(e){if(typeof e=="string")/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(e)?this.hexString=e:/^rgba?/.test(e)?this.rgbString=e:/^hsla?/.test(e)&&(this.hslString=e);else if(typeof e=="object")e instanceof n?this.hsva=e.hsva:"r"in e&&"g"in e&&"b"in e?this.rgb=e:"h"in e&&"s"in e&&"v"in e?this.hsv=e:"h"in e&&"s"in e&&"l"in e?this.hsl=e:"kelvin"in e&&(this.kelvin=e.kelvin);else throw new Error("Invalid color value")},i.setChannel=function(e,s,o){var r;this[e]=T({},this[e],(r={},r[s]=o,r))},i.reset=function(){this.hsva=this.initialValue},i.clone=function(){return new n(this)},i.unbind=function(){this.onChange=void 0},n.hsvToRgb=function(e){var s=e.h/60,o=e.s/100,r=e.v/100,a=ct(s),l=s-a,c=r*(1-o),d=r*(1-l*o),u=r*(1-(1-l)*o),f=a%6,p=[r,d,c,c,u,r][f],y=[u,r,r,d,c,c][f],_=[c,c,u,r,r,d][f];return{r:$(p*255,0,255),g:$(y*255,0,255),b:$(_*255,0,255)}},n.rgbToHsv=function(e){var s=e.r/255,o=e.g/255,r=e.b/255,a=Math.max(s,o,r),l=Math.min(s,o,r),c=a-l,d=0,u=a,f=a===0?0:c/a;switch(a){case l:d=0;break;case s:d=(o-r)/c+(o<r?6:0);break;case o:d=(r-s)/c+2;break;case r:d=(s-o)/c+4;break}return{h:d*60%360,s:$(f*100,0,100),v:$(u*100,0,100)}},n.hsvToHsl=function(e){var s=e.s/100,o=e.v/100,r=(2-s)*o,a=r<=1?r:2-r,l=a<1e-9?0:s*o/a;return{h:e.h,s:$(l*100,0,100),l:$(r*50,0,100)}},n.hslToHsv=function(e){var s=e.l*2,o=e.s*(s<=100?s:200-s)/100,r=s+o<1e-9?0:2*o/(s+o);return{h:e.h,s:$(r*100,0,100),v:$((s+o)/2,0,100)}},n.kelvinToRgb=function(e){var s=e/100,o,r,a;return s<66?(o=255,r=-155.25485562709179-.44596950469579133*(r=s-2)+104.49216199393888*Et(r),a=s<20?0:-254.76935184120902+.8274096064007395*(a=s-10)+115.67994401066147*Et(a)):(o=351.97690566805693+.114206453784165*(o=s-55)-40.25366309332127*Et(o),r=325.4494125711974+.07943456536662342*(r=s-50)-28.0852963507957*Et(r),a=255),{r:$(ct(o),0,255),g:$(ct(r),0,255),b:$(ct(a),0,255)}},n.rgbToKelvin=function(e){for(var s=e.r,o=e.b,r=.4,a=Xn,l=Yn,c;l-a>r;){c=(l+a)*.5;var d=n.kelvinToRgb(c);d.b/d.r>=o/s?l=c:a=c}return c},Pn(n,[{key:"hsv",get:function(){var e=this.$;return{h:e.h,s:e.s,v:e.v}},set:function(e){var s=this.$;if(e=T({},s,e),this.onChange){var o={h:!1,v:!1,s:!1,a:!1};for(var r in s)o[r]=e[r]!=s[r];this.$=e,(o.h||o.s||o.v||o.a)&&this.onChange(this,o)}else this.$=e}},{key:"hsva",get:function(){return T({},this.$)},set:function(e){this.hsv=e}},{key:"hue",get:function(){return this.$.h},set:function(e){this.hsv={h:e}}},{key:"saturation",get:function(){return this.$.s},set:function(e){this.hsv={s:e}}},{key:"value",get:function(){return this.$.v},set:function(e){this.hsv={v:e}}},{key:"alpha",get:function(){return this.$.a},set:function(e){this.hsv=T({},this.hsv,{a:e})}},{key:"kelvin",get:function(){return n.rgbToKelvin(this.rgb)},set:function(e){this.rgb=n.kelvinToRgb(e)}},{key:"red",get:function(){var e=this.rgb;return e.r},set:function(e){this.rgb=T({},this.rgb,{r:e})}},{key:"green",get:function(){var e=this.rgb;return e.g},set:function(e){this.rgb=T({},this.rgb,{g:e})}},{key:"blue",get:function(){var e=this.rgb;return e.b},set:function(e){this.rgb=T({},this.rgb,{b:e})}},{key:"rgb",get:function(){var e=n.hsvToRgb(this.$),s=e.r,o=e.g,r=e.b;return{r:J(s),g:J(o),b:J(r)}},set:function(e){this.hsv=T({},n.rgbToHsv(e),{a:e.a===void 0?1:e.a})}},{key:"rgba",get:function(){return T({},this.rgb,{a:this.alpha})},set:function(e){this.rgb=e}},{key:"hsl",get:function(){var e=n.hsvToHsl(this.$),s=e.h,o=e.s,r=e.l;return{h:J(s),s:J(o),l:J(r)}},set:function(e){this.hsv=T({},n.hslToHsv(e),{a:e.a===void 0?1:e.a})}},{key:"hsla",get:function(){return T({},this.hsl,{a:this.alpha})},set:function(e){this.hsl=e}},{key:"rgbString",get:function(){var e=this.rgb;return"rgb("+e.r+", "+e.g+", "+e.b+")"},set:function(e){var s,o,r,a,l=1;if((s=Un.exec(e))?(o=N(s[1],255),r=N(s[2],255),a=N(s[3],255)):(s=Fn.exec(e))&&(o=N(s[1],255),r=N(s[2],255),a=N(s[3],255),l=N(s[4],1)),s)this.rgb={r:o,g:r,b:a,a:l};else throw new Error("Invalid rgb string")}},{key:"rgbaString",get:function(){var e=this.rgba;return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},set:function(e){this.rgbString=e}},{key:"hexString",get:function(){var e=this.rgb;return"#"+F(e.r)+F(e.g)+F(e.b)},set:function(e){var s,o,r,a,l=255;if((s=jn.exec(e))?(o=A(s[1])*17,r=A(s[2])*17,a=A(s[3])*17):(s=qn.exec(e))?(o=A(s[1])*17,r=A(s[2])*17,a=A(s[3])*17,l=A(s[4])*17):(s=Vn.exec(e))?(o=A(s[1]),r=A(s[2]),a=A(s[3])):(s=Gn.exec(e))&&(o=A(s[1]),r=A(s[2]),a=A(s[3]),l=A(s[4])),s)this.rgb={r:o,g:r,b:a,a:l/255};else throw new Error("Invalid hex string")}},{key:"hex8String",get:function(){var e=this.rgba;return"#"+F(e.r)+F(e.g)+F(e.b)+F(ct(e.a*255))},set:function(e){this.hexString=e}},{key:"hslString",get:function(){var e=this.hsl;return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},set:function(e){var s,o,r,a,l=1;if((s=Wn.exec(e))?(o=N(s[1],360),r=N(s[2],100),a=N(s[3],100)):(s=Bn.exec(e))&&(o=N(s[1],360),r=N(s[2],100),a=N(s[3],100),l=N(s[4],1)),s)this.hsl={h:o,s:r,l:a,a:l};else throw new Error("Invalid hsl string")}},{key:"hslaString",get:function(){var e=this.hsla;return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},set:function(e){this.hslString=e}}]),n}(),Kn={sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3};function Kt(n){var i,t=n.width,e=n.sliderSize,s=n.borderWidth,o=n.handleRadius,r=n.padding,a=n.sliderShape,l=n.layoutDirection==="horizontal";return e=(i=e)!=null?i:r*2+o*2,a==="circle"?{handleStart:n.padding+n.handleRadius,handleRange:t-r*2-o*2,width:t,height:t,cx:t/2,cy:t/2,radius:t/2-s/2}:{handleStart:e/2,handleRange:t-e,radius:e/2,x:0,y:0,width:l?e:t,height:l?t:e}}function Qn(n,i){var t=i.hsva,e=i.rgb;switch(n.sliderType){case"red":return e.r/2.55;case"green":return e.g/2.55;case"blue":return e.b/2.55;case"alpha":return t.a*100;case"kelvin":var s=n.minTemperature,o=n.maxTemperature,r=o-s,a=(i.kelvin-s)/r*100;return Math.max(0,Math.min(a,100));case"hue":return t.h/=3.6;case"saturation":return t.s;case"value":default:return t.v}}function Jn(n,i,t){var e=Kt(n),s=e.handleRange,o=e.handleStart,r;n.layoutDirection==="horizontal"?r=-1*t+s+o:r=i-o,r=Math.max(Math.min(r,s),0);var a=Math.round(100/s*r);switch(n.sliderType){case"kelvin":var l=n.minTemperature,c=n.maxTemperature,d=c-l;return l+d*(a/100);case"alpha":return a/100;case"hue":return a*3.6;case"red":case"blue":case"green":return a*2.55;default:return a}}function Zn(n,i){var t=Kt(n),e=t.width,s=t.height,o=t.handleRange,r=t.handleStart,a=n.layoutDirection==="horizontal",l=Qn(n,i),c=a?e/2:s/2,d=r+l/100*o;return a&&(d=-1*d+o+r*2),{x:a?c:d,y:a?d:c}}function ti(n,i){var t=i.hsv,e=i.rgb;switch(n.sliderType){case"red":return[[0,"rgb(0,"+e.g+","+e.b+")"],[100,"rgb(255,"+e.g+","+e.b+")"]];case"green":return[[0,"rgb("+e.r+",0,"+e.b+")"],[100,"rgb("+e.r+",255,"+e.b+")"]];case"blue":return[[0,"rgb("+e.r+","+e.g+",0)"],[100,"rgb("+e.r+","+e.g+",255)"]];case"alpha":return[[0,"rgba("+e.r+","+e.g+","+e.b+",0)"],[100,"rgb("+e.r+","+e.g+","+e.b+")"]];case"kelvin":for(var s=[],o=n.minTemperature,r=n.maxTemperature,a=8,l=r-o,c=o,d=0;c<r;c+=l/a,d+=1){var u=tt.kelvinToRgb(c),f=u.r,p=u.g,y=u.b;s.push([100/a*d,"rgb("+f+","+p+","+y+")"])}return s;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var _=tt.hsvToHsl({h:t.h,s:0,v:t.v}),E=tt.hsvToHsl({h:t.h,s:100,v:t.v});return[[0,"hsl("+_.h+","+_.s+"%,"+_.l+"%)"],[100,"hsl("+E.h+","+E.s+"%,"+E.l+"%)"]];case"value":default:var x=tt.hsvToHsl({h:t.h,s:t.s,v:100});return[[0,"#000"],[100,"hsl("+x.h+","+x.s+"%,"+x.l+"%)"]]}}var ze=Math.PI*2,ei=function(i,t){return(i%t+t)%t},He=function(i,t){return Math.sqrt(i*i+t*t)};function Ue(n){return n.width/2-n.padding-n.handleRadius-n.borderWidth}function ni(n,i,t){var e=At(n),s=e.cx,o=e.cy,r=n.width/2;return He(s-i,o-t)<r}function At(n){var i=n.width/2;return{width:n.width,radius:i-n.borderWidth,cx:i,cy:i}}function Fe(n,i,t){var e=n.wheelAngle,s=n.wheelDirection;return t&&s==="clockwise"?i=e+i:s==="clockwise"?i=360-e+i:t&&s==="anticlockwise"?i=e+180-i:s==="anticlockwise"&&(i=e-i),ei(i,360)}function ii(n,i){var t=i.hsv,e=At(n),s=e.cx,o=e.cy,r=Ue(n),a=(180+Fe(n,t.h,!0))*(ze/360),l=t.s/100*r,c=n.wheelDirection==="clockwise"?-1:1;return{x:s+l*Math.cos(a)*c,y:o+l*Math.sin(a)*c}}function _e(n,i,t){var e=At(n),s=e.cx,o=e.cy,r=Ue(n);i=s-i,t=o-t;var a=Fe(n,Math.atan2(-t,-i)*(360/ze)),l=Math.min(He(i,t),r);return{h:Math.round(a),s:Math.round(100/r*l)}}function Qt(n){var i=n.width,t=n.boxHeight,e=n.padding,s=n.handleRadius;return{width:i,height:t??i,radius:e+s}}function ye(n,i,t){var e=Qt(n),s=e.width,o=e.height,r=e.radius,a=r,l=s-r*2,c=o-r*2,d=(i-a)/l*100,u=(t-a)/c*100;return{s:Math.max(0,Math.min(d,100)),v:Math.max(0,Math.min(100-u,100))}}function si(n,i){var t=Qt(n),e=t.width,s=t.height,o=t.radius,r=i.hsv,a=o,l=e-o*2,c=s-o*2;return{x:a+r.s/100*l,y:a+(c-r.v/100*c)}}function oi(n,i){var t=i.hue;return[[[0,"#fff"],[100,"hsl("+t+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]]}var Ut;function ri(n){Ut||(Ut=document.getElementsByTagName("base"));var i=window.navigator.userAgent,t=/^((?!chrome|android).)*safari/i.test(i),e=/iPhone|iPod|iPad/i.test(i),s=window.location;return(t||e)&&Ut.length>0?s.protocol+"//"+s.host+s.pathname+s.search+n:n}function We(n,i,t,e){for(var s=0;s<e.length;s++){var o=e[s].x-i,r=e[s].y-t,a=Math.sqrt(o*o+r*r);if(a<n.handleRadius)return s}return null}function Jt(n){return{boxSizing:"border-box",border:n.borderWidth+"px solid "+n.borderColor}}function qt(n,i,t){return n+"-gradient("+i+", "+t.map(function(e){var s=e[0],o=e[1];return o+" "+s+"%"}).join(",")+")"}function S(n){return typeof n=="string"?n:n+"px"}var ai={width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},be=["mousemove","touchmove","mouseup","touchend"],Tt=function(n){function i(t){n.call(this,t),this.uid=(Math.random()+1).toString(36).substring(5)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.render=function(e){var s=this.handleEvent.bind(this),o={onMouseDown:s,ontouchstart:s},r=e.layoutDirection==="horizontal",a=e.margin===null?e.sliderMargin:e.margin,l={overflow:"visible",display:r?"inline-block":"block"};return e.index>0&&(l[r?"marginLeft":"marginTop"]=a),b(Dt,null,e.children(this.uid,o,l))},i.prototype.handleEvent=function(e){var s=this,o=this.props.onInput,r=this.base.getBoundingClientRect();e.preventDefault();var a=e.touches?e.changedTouches[0]:e,l=a.clientX-r.left,c=a.clientY-r.top;switch(e.type){case"mousedown":case"touchstart":var d=o(l,c,0);d!==!1&&be.forEach(function(u){document.addEventListener(u,s,{passive:!1})});break;case"mousemove":case"touchmove":o(l,c,1);break;case"mouseup":case"touchend":o(l,c,2),be.forEach(function(u){document.removeEventListener(u,s,{passive:!1})});break}},i}(nt);function q(n){var i=n.r,t=n.url,e=i,s=i;return b("svg",{className:"IroHandle IroHandle--"+n.index+" "+(n.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+S(n.x)+", "+S(n.y)+")",willChange:"transform",top:S(-i),left:S(-i),width:S(i*2),height:S(i*2),position:"absolute",overflow:"visible"}},t&&b("use",Object.assign({xlinkHref:ri(t)},n.props)),!t&&b("circle",{cx:e,cy:s,r:i,fill:"none","stroke-width":2,stroke:"#000"}),!t&&b("circle",{cx:e,cy:s,r:i-2,fill:n.fill,"stroke-width":2,stroke:"#fff"}))}q.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}};function Mt(n){var i=n.activeIndex,t=i!==void 0&&i<n.colors.length?n.colors[i]:n.color,e=Kt(n),s=e.width,o=e.height,r=e.radius,a=Zn(n,t),l=ti(n,t);function c(d,u,f){var p=Jn(n,d,u);n.parent.inputActive=!0,t[n.sliderType]=p,n.onInput(f,n.id)}return b(Tt,Object.assign({},n,{onInput:c}),function(d,u,f){return b("div",Object.assign({},u,{className:"IroSlider",style:Object.assign({},{position:"relative",width:S(s),height:S(o),borderRadius:S(r),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},f)}),b("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:S(r),background:qt("linear",n.layoutDirection==="horizontal"?"to top":"to right",l)},Jt(n))}),b(q,{isActive:!0,index:t.index,r:n.handleRadius,url:n.handleSvg,props:n.handleProps,x:a.x,y:a.y}))})}Mt.defaultProps=Object.assign({},Kn);function li(n){var i=Qt(n),t=i.width,e=i.height,s=i.radius,o=n.colors,r=n.parent,a=n.activeIndex,l=a!==void 0&&a<n.colors.length?n.colors[a]:n.color,c=oi(n,l),d=o.map(function(f){return si(n,f)});function u(f,p,y){if(y===0){var _=We(n,f,p,d);_!==null?r.setActiveColor(_):(r.inputActive=!0,l.hsv=ye(n,f,p),n.onInput(y,n.id))}else y===1&&(r.inputActive=!0,l.hsv=ye(n,f,p));n.onInput(y,n.id)}return b(Tt,Object.assign({},n,{onInput:u}),function(f,p,y){return b("div",Object.assign({},p,{className:"IroBox",style:Object.assign({},{width:S(t),height:S(e),position:"relative"},y)}),b("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:S(s)},Jt(n),{background:qt("linear","to bottom",c[1])+","+qt("linear","to right",c[0])})}),o.filter(function(_){return _!==l}).map(function(_){return b(q,{isActive:!1,index:_.index,fill:_.hslString,r:n.handleRadius,url:n.handleSvg,props:n.handleProps,x:d[_.index].x,y:d[_.index].y})}),b(q,{isActive:!0,index:l.index,fill:l.hslString,r:n.activeHandleRadius||n.handleRadius,url:n.handleSvg,props:n.handleProps,x:d[l.index].x,y:d[l.index].y}))})}var ui="conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",ci="conic-gradient(red, magenta, blue, aqua, lime, yellow, red)";function Be(n){var i=At(n),t=i.width,e=n.colors;n.borderWidth;var s=n.parent,o=n.color,r=o.hsv,a=e.map(function(d){return ii(n,d)}),l={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};function c(d,u,f){if(f===0){if(!ni(n,d,u))return!1;var p=We(n,d,u,a);p!==null?s.setActiveColor(p):(s.inputActive=!0,o.hsv=_e(n,d,u),n.onInput(f,n.id))}else f===1&&(s.inputActive=!0,o.hsv=_e(n,d,u));n.onInput(f,n.id)}return b(Tt,Object.assign({},n,{onInput:c}),function(d,u,f){return b("div",Object.assign({},u,{className:"IroWheel",style:Object.assign({},{width:S(t),height:S(t),position:"relative"},f)}),b("div",{className:"IroWheelHue",style:Object.assign({},l,{transform:"rotateZ("+(n.wheelAngle+90)+"deg)",background:n.wheelDirection==="clockwise"?ui:ci})}),b("div",{className:"IroWheelSaturation",style:Object.assign({},l,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),n.wheelLightness&&b("div",{className:"IroWheelLightness",style:Object.assign({},l,{background:"#000",opacity:1-r.v/100})}),b("div",{className:"IroWheelBorder",style:Object.assign({},l,Jt(n))}),e.filter(function(p){return p!==o}).map(function(p){return b(q,{isActive:!1,index:p.index,fill:p.hslString,r:n.handleRadius,url:n.handleSvg,props:n.handleProps,x:a[p.index].x,y:a[p.index].y})}),b(q,{isActive:!0,index:o.index,fill:o.hslString,r:n.activeHandleRadius||n.handleRadius,url:n.handleSvg,props:n.handleProps,x:a[o.index].x,y:a[o.index].y}))})}function di(n){var i=function(t,e){var s,o=document.createElement("div");Rn(b(n,Object.assign({},{ref:function(a){return s=a}},e)),o);function r(){var a=t instanceof Element?t:document.querySelector(t);a.appendChild(s.base),s.onMount(a)}return document.readyState!=="loading"?r():document.addEventListener("DOMContentLoaded",r),s};return i.prototype=n.prototype,Object.assign(i,n),i.__component=n,i}var je=function(n){function i(t){var e=this;n.call(this,t),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=t.id;var s=t.colors.length>0?t.colors:[t.color];s.forEach(function(o){return e.addColor(o)}),this.setActiveColor(0),this.state=Object.assign({},t,{color:this.color,colors:this.colors,layout:t.layout})}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.addColor=function(e,s){s===void 0&&(s=this.colors.length);var o=new tt(e,this.onColorChange.bind(this));this.colors.splice(s,0,o),this.colors.forEach(function(r,a){return r.index=a}),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",o)},i.prototype.removeColor=function(e){var s=this.colors.splice(e,1)[0];s.unbind(),this.colors.forEach(function(o,r){return o.index=r}),this.state&&this.setState({colors:this.colors}),s.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",s)},i.prototype.setActiveColor=function(e){this.color=this.colors[e],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},i.prototype.setColors=function(e,s){var o=this;s===void 0&&(s=0),this.colors.forEach(function(r){return r.unbind()}),this.colors=[],e.forEach(function(r){return o.addColor(r)}),this.setActiveColor(s),this.emit("color:setAll",this.colors)},i.prototype.on=function(e,s){var o=this,r=this.events;(Array.isArray(e)?e:[e]).forEach(function(a){(r[a]||(r[a]=[])).push(s),o.deferredEvents[a]&&(o.deferredEvents[a].forEach(function(l){s.apply(null,l)}),o.deferredEvents[a]=[])})},i.prototype.off=function(e,s){var o=this;(Array.isArray(e)?e:[e]).forEach(function(r){var a=o.events[r];a&&a.splice(a.indexOf(s),1)})},i.prototype.emit=function(e){for(var s=this,o=[],r=arguments.length-1;r-- >0;)o[r]=arguments[r+1];var a=this.activeEvents,l=a.hasOwnProperty(e)?a[e]:!1;if(!l){a[e]=!0;var c=this.events[e]||[];c.forEach(function(d){return d.apply(s,o)}),a[e]=!1}},i.prototype.deferredEmit=function(e){for(var s,o=[],r=arguments.length-1;r-- >0;)o[r]=arguments[r+1];var a=this.deferredEvents;(s=this).emit.apply(s,[e].concat(o)),(a[e]||(a[e]=[])).push(o)},i.prototype.setOptions=function(e){this.setState(e)},i.prototype.resize=function(e){this.setOptions({width:e})},i.prototype.reset=function(){this.colors.forEach(function(e){return e.reset()}),this.setState({colors:this.colors})},i.prototype.onMount=function(e){this.el=e,this.deferredEmit("mount",this)},i.prototype.onColorChange=function(e,s){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",e,s)),this.emit("color:change",e,s)},i.prototype.emitInputEvent=function(e,s){e===0?this.emit("input:start",this.color,s):e===1?this.emit("input:move",this.color,s):e===2&&this.emit("input:end",this.color,s)},i.prototype.render=function(e,s){var o=this,r=s.layout;if(!Array.isArray(r)){switch(r){default:r=[{component:Be},{component:Mt}]}s.transparency&&r.push({component:Mt,options:{sliderType:"alpha"}})}return b("div",{class:"IroColorPicker",id:s.id,style:{display:s.display}},r.map(function(a,l){var c=a.component,d=a.options;return b(c,Object.assign({},s,d,{ref:void 0,onInput:o.emitInputEvent.bind(o),parent:o,index:l}))}))},i}(nt);je.defaultProps=Object.assign({},ai,{colors:[],display:"block",id:null,layout:"default",margin:null});var hi=di(je),Vt;(function(n){n.version="5.5.2",n.Color=tt,n.ColorPicker=hi,function(i){i.h=b,i.ComponentBase=Tt,i.Handle=q,i.Slider=Mt,i.Wheel=Be,i.Box=li}(n.ui||(n.ui={}))})(Vt||(Vt={}));var fi=Vt;const pi={functions:{output:{inputs:[],outputs:["Hex String","R","G","B"],functionInit:n=>{n.iro=new fi.ColorPicker("#picker",{}),n.iro.on("input:start",i=>{n.freeze=!0}),n.iro.on("color:change",i=>{n.run()}),n.iro.on("input:end",i=>{n.freeze=!1})},functionUpdate:n=>[n.iro.color.hexString,n.iro.color.red,n.iro.color.green,n.iro.color.blue]}},elements:[{type:"output-text",name:"Hex String"},{type:"output-text",name:"R"},{type:"output-text",name:"G"},{type:"output-text",name:"B"},{type:"custom",name:"RGB",html:`
      <div class="relative">
      <div class=" relative z-20" id="picker"></div>
      <div class="pointer-events-none absolute top-0 left-0 h-full w-full z-10"></div>
      <p class="text-sm text-gray-400">Powered by iro.js</p>
      </div>
      `}]};function mi(n){let i,t,e,s,o,r,a,l,c,d,u,f,p,y,_,E,x,w,M,O,H,V,$t,C,U,vt,G,Zt,_t,it,te,yt,st,ee,bt,ot,ne,Lt,X,rt,ie,L,xt,at,se,wt,lt,oe,Ct,ut,re,kt,Rt,ae;return{c(){i=v("main"),t=v("link"),s=I(),o=v("navbar"),r=v("div"),a=v("div"),l=v("button"),l.textContent="Add Node",c=I(),d=v("ul"),u=v("div"),u.textContent="Input",f=I(),p=v("li"),y=v("button"),y.textContent="Float",_=I(),E=v("li"),x=v("button"),x.textContent="Color",w=I(),M=v("div"),M.textContent="Output",O=I(),H=v("li"),V=v("button"),V.textContent="Display",$t=I(),C=v("li"),U=v("button"),U.textContent="Youtube",vt=I(),G=v("div"),G.textContent="Math",Zt=I(),_t=v("li"),it=v("button"),it.textContent="Math",te=I(),yt=v("li"),st=v("button"),st.textContent="Clamp",ee=I(),bt=v("li"),ot=v("button"),ot.textContent="Lerp",ne=I(),Lt=v("div"),X=v("div"),rt=v("button"),rt.textContent="Theme",ie=I(),L=v("ul"),xt=v("li"),at=v("button"),at.textContent="Standard",se=I(),wt=v("li"),lt=v("button"),lt.textContent="Standard (Dark)",oe=I(),Ct=v("li"),ut=v("button"),ut.textContent="Retro",re=I(),kt=v("div"),g(t,"href",e=n[3]+"theme/"+n[0]),g(t,"rel","stylesheet"),g(t,"type","text/css"),g(l,"class","button svelte-1qmvmmr"),K(l,"active",n[1]),g(u,"class","divider"),g(y,"class","sl-btn svelte-1qmvmmr"),g(p,"class","svelte-1qmvmmr"),g(x,"class","sl-btn svelte-1qmvmmr"),g(E,"class","svelte-1qmvmmr"),g(M,"class","divider"),g(V,"class","sl-btn svelte-1qmvmmr"),g(H,"class","svelte-1qmvmmr"),g(U,"class","sl-btn svelte-1qmvmmr"),g(C,"class","svelte-1qmvmmr"),g(G,"class","divider"),g(it,"class","sl-btn svelte-1qmvmmr"),g(_t,"class","svelte-1qmvmmr"),g(st,"class","sl-btn svelte-1qmvmmr"),g(yt,"class","svelte-1qmvmmr"),g(ot,"class","sl-btn svelte-1qmvmmr"),g(bt,"class","svelte-1qmvmmr"),g(d,"class","svelte-1qmvmmr"),K(d,"hide",!n[1]),g(a,"class","sl-dropdown svelte-1qmvmmr"),g(rt,"class","button svelte-1qmvmmr"),g(at,"class","sl-btn svelte-1qmvmmr"),g(xt,"class","svelte-1qmvmmr"),g(lt,"class","sl-btn svelte-1qmvmmr"),g(wt,"class","svelte-1qmvmmr"),g(ut,"class","sl-btn svelte-1qmvmmr"),g(Ct,"class","svelte-1qmvmmr"),g(L,"class","svelte-1qmvmmr"),K(L,"hide",!n[2]),g(X,"class","sl-dropdown svelte-1qmvmmr"),g(o,"class","navbar svelte-1qmvmmr"),g(kt,"class","w-full h-screen bg-white overflow-hidden relative select-none"),g(kt,"id","node-editor")},m(R,Y){Ye(R,i,Y),m(i,t),m(i,s),m(i,o),m(o,r),m(r,a),m(a,l),m(a,c),m(a,d),m(d,u),m(d,f),m(d,p),m(p,y),m(d,_),m(d,E),m(E,x),m(d,w),m(d,M),m(d,O),m(d,H),m(H,V),m(d,$t),m(d,C),m(C,U),m(d,vt),m(d,G),m(d,Zt),m(d,_t),m(_t,it),m(d,te),m(d,yt),m(yt,st),m(d,ee),m(d,bt),m(bt,ot),m(o,ne),m(o,Lt),m(Lt,X),m(X,rt),m(X,ie),m(X,L),m(L,xt),m(xt,at),m(L,se),m(L,wt),m(wt,lt),m(L,oe),m(L,Ct),m(Ct,ut),m(i,re),m(i,kt),Rt||(ae=[D(l,"click",ue(n[6])),D(y,"mouseup",n[7]),D(x,"mouseup",n[8]),D(V,"mouseup",n[9]),D(U,"mouseup",n[10]),D(it,"mouseup",n[11]),D(st,"mouseup",n[12]),D(ot,"mouseup",n[13]),D(rt,"click",ue(n[14])),D(at,"click",n[15]),D(lt,"click",n[16]),D(ut,"click",n[17]),D(i,"click",n[18]),D(i,"keydown",gi)],Rt=!0)},p(R,[Y]){Y&1&&e!==(e=R[3]+"theme/"+R[0])&&g(t,"href",e),Y&2&&K(l,"active",R[1]),Y&2&&K(d,"hide",!R[1]),Y&4&&K(L,"hide",!R[2])},i:ht,o:ht,d(R){R&&Ce(i),Rt=!1,pt(ae)}}}const gi=()=>{};function vi(n,i,t){const s="/SnapLineJS/";let o=null;Ze(async()=>{o=new On("node-editor")});let r="standard.css";function a(C){t(0,r=C)}let l=!1,c=!1;function d(C,U){t(1,l=!1);let vt=o.g.mouse_x_world,G=o.g.mouse_y_world;console.debug("Adding node",C,"at",vt,G),o.addNodeAtMouse(C,U)}return[r,l,c,s,a,d,()=>{t(1,l=!l),t(2,c=!1)},C=>d(vn,C),C=>d(pi,C),C=>d(_n,C),C=>d(fn,C),C=>d(pn,C),C=>d(mn,C),C=>d(gn,C),()=>{t(2,c=!c),t(1,l=!1)},()=>a("standard.css"),()=>a("dark.css"),()=>a("retro.css"),()=>{t(1,l=!1),t(2,c=!1)}]}class _i extends dn{constructor(i){super(),cn(this,i,vi,mi,Ge,{})}}new _i({target:document.getElementById("app")});
