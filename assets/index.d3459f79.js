var We=Object.defineProperty;var je=(n,i,t)=>i in n?We(n,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[i]=t;var h=(n,i,t)=>(je(n,typeof i!="symbol"?i+"":i,t),t);const Be=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}};Be();function vt(){}function be(n){return n()}function ae(){return Object.create(null)}function at(n){n.forEach(be)}function Ve(n){return typeof n=="function"}function Ge(n,i){return n!=n?i==i:n!==i||n&&typeof n=="object"||typeof n=="function"}function Xe(n){return Object.keys(n).length===0}function g(n,i){n.appendChild(i)}function Ye(n,i,t){n.insertBefore(i,t||null)}function we(n){n.parentNode.removeChild(n)}function v(n){return document.createElement(n)}function qe(n){return document.createTextNode(n)}function E(){return qe(" ")}function T(n,i,t,e){return n.addEventListener(i,t,e),()=>n.removeEventListener(i,t,e)}function m(n,i,t){t==null?n.removeAttribute(i):n.getAttribute(i)!==t&&n.setAttribute(i,t)}function Ke(n){return Array.from(n.childNodes)}let rt;function st(n){rt=n}function Qe(){if(!rt)throw new Error("Function called outside component initialization");return rt}function Je(n){Qe().$$.on_mount.push(n)}const ot=[],le=[],gt=[],ce=[],Ze=Promise.resolve();let Pt=!1;function tn(){Pt||(Pt=!0,Ze.then(ye))}function Ht(n){gt.push(n)}const At=new Set;let ft=0;function ye(){const n=rt;do{for(;ft<ot.length;){const i=ot[ft];ft++,st(i),en(i.$$)}for(st(null),ot.length=0,ft=0;le.length;)le.pop()();for(let i=0;i<gt.length;i+=1){const t=gt[i];At.has(t)||(At.add(t),t())}gt.length=0}while(ot.length);for(;ce.length;)ce.pop()();Pt=!1,At.clear(),st(n)}function en(n){if(n.fragment!==null){n.update(),at(n.before_update);const i=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,i),n.after_update.forEach(Ht)}}const nn=new Set;function on(n,i){n&&n.i&&(nn.delete(n),n.i(i))}function sn(n,i,t,e){const{fragment:o,on_mount:s,on_destroy:r,after_update:a}=n.$$;o&&o.m(i,t),e||Ht(()=>{const l=s.map(be).filter(Ve);r?r.push(...l):at(l),n.$$.on_mount=[]}),a.forEach(Ht)}function rn(n,i){const t=n.$$;t.fragment!==null&&(at(t.on_destroy),t.fragment&&t.fragment.d(i),t.on_destroy=t.fragment=null,t.ctx=[])}function an(n,i){n.$$.dirty[0]===-1&&(ot.push(n),tn(),n.$$.dirty.fill(0)),n.$$.dirty[i/31|0]|=1<<i%31}function ln(n,i,t,e,o,s,r,a=[-1]){const l=rt;st(n);const u=n.$$={fragment:null,ctx:null,props:s,update:vt,not_equal:o,bound:ae(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(l?l.$$.context:[])),callbacks:ae(),dirty:a,skip_bound:!1,root:i.target||l.$$.root};r&&r(u.root);let d=!1;if(u.ctx=t?t(n,i.props||{},(c,f,...p)=>{const b=p.length?p[0]:f;return u.ctx&&o(u.ctx[c],u.ctx[c]=b)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](b),d&&an(n,c)),f}):[],u.update(),d=!0,at(u.before_update),u.fragment=e?e(u.ctx):!1,i.target){if(i.hydrate){const c=Ke(i.target);u.fragment&&u.fragment.l(c),c.forEach(we)}else u.fragment&&u.fragment.c();i.intro&&on(n.$$.fragment),sn(n,i.target,i.anchor,i.customElement),ye()}st(l)}class cn{$destroy(){rn(this,1),this.$destroy=vt}$on(i,t){const e=this.$$.callbacks[i]||(this.$$.callbacks[i]=[]);return e.push(t),()=>{const o=e.indexOf(t);o!==-1&&e.splice(o,1)}}$set(i){this.$$set&&!Xe(i)&&(this.$$.skip_bound=!0,this.$$set(i),this.$$.skip_bound=!1)}}const un={functions:{visualize:{inputs:["Video ID","Show Controls"],outputs:[],functionInit:n=>{n.yt=n.dom.querySelector(".yt")},functionUpdate:(n,i,t)=>{i||(i="m4-HM_sCvtQ"),n.yt.src="https://www.youtube.com/embed/"+i+"?autoplay=1&controls="+(t?"1":"0")}}},elements:[{type:"input-text",name:"Video ID"},{type:"input-bool",name:"Show Controls"},{type:"custom",html:`
        <iframe class="yt rounded-lg" width="560" height="315" src="https://www.youtube.com/embed/m4-HM_sCvtQ?autoplay=1&controls=0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      `}]},dn={functions:{output:{inputs:["Input 1","Input 2","Operation"],outputs:["Result"],functionUpdate:(n,i,t,e)=>{switch(e){case"+":return i+t;case"-":return i-t;case"*":return i*t;case"/":return i/t;default:return 0}}}},elements:[{type:"output-text",name:"Result"},[{type:"ui-dropdown",name:"Operation",values:[{value:"+",label:"Add"},{value:"-",label:"Subtract"},{value:"*",label:"Multiply"},{value:"/",label:"Divide"}]}],[{type:"input-text",name:"Input 1"}],[{type:"input-text",name:"Input 2"}]]},hn={functions:{output:{inputs:["Min","Max","Value"],outputs:["Result"],functionUpdate:(n,i,t,e)=>Math.min(Math.max(i,e),t)}},elements:[{type:"output-text",name:"Result"},{type:"input-float-infinite",name:"Min"},{type:"input-float-infinite",name:"Max"},{type:"input-float-infinite",name:"Value"}]},fn={functions:{output:{inputs:["Input 1","Input 2","Alpha"],outputs:["Result"],functionUpdate:(n,i,t,e)=>(i=parseFloat(i),t=parseFloat(t),e=parseFloat(e),i+(t-i)*e)}},elements:[{type:"output-text",name:"Result"},{type:"input-text",name:"Input 1"},{type:"input-text",name:"Input 2"},{type:"input-float",name:"Alpha",min:0,max:1}]},pn={functions:{output:{inputs:["Value"],outputs:["Result"],functionUpdate:(n,i)=>parseFloat(i)}},elements:[{type:"output-text",name:"Result"},{type:"input-float-infinite",name:"Input 1"}]},gn={functions:{output:{inputs:["Input"],outputs:[],functionInit:(n,i)=>{n.display=n.dom.querySelector(".display")},functionUpdate:(n,i)=>{n.display.innerText=i}}},elements:[{type:"input-text",name:"Input"},{type:"custom",name:"Display",html:`
      <div class="bg-red rounded-lg">
        <span class="display text-3xl"></span>
      </div>
      `}]};function ue(n,i,t){return n>=i&&n<=t||n>=t&&n<=i}function de(n,i,t){const e=t.zoom,o=t.zoom,s=-n*t.zoom+t.cameraWidth/2,r=-i*t.zoom+t.cameraHeight/2;return`${e},0,0,0,0,${o},0,0,0,0,1,0,${s},${r},0,1`}function lt(n,i){if(i.name==="")return;const t=document.createElement("span");return t.classList.add("sl-label"),t.innerText=i.name,t.style.zIndex="99",n.appendChild(t),t}class xe{constructor(i){h(this,"g");h(this,"gid");h(this,"position_x");h(this,"position_y");this.g=i,i.gid++,this.gid=i.gid.toString(),this.position_x=0,this.position_y=0}bindFunction(i){i.onmousedown=this.domMouseDown.bind(this)}domMouseDown(i){console.debug(this),this.g.isMouseDown=!0,this.g.targetNode=this,this.g.mousedown_x=i.clientX,this.g.mousedown_y=i.clientY,this.g.dx=0,this.g.dy=0,this.g.dx_offset=0,this.g.dy_offset=0,this.onFocus(),this.customMouseDown(i),i.stopPropagation()}customMouseDown(i){console.debug(i)}domMouseUp(){}onFocus(){}offFocus(){}onDrag(){}onPan(){}}class ct extends xe{constructor(t,e,o){super(o);h(this,"parent");h(this,"config");h(this,"dom");this.config=t,this.parent=e,this.dom=null}}class ke extends ct{constructor(t,e,o){super(t,e,o);h(this,"connector_x");h(this,"connector_y");h(this,"c_total_offset_x");h(this,"c_total_offset_y");h(this,"name");this.connector_x=0,this.connector_y=0,this.c_total_offset_x=0,this.c_total_offset_y=0,this.dom=null,t.name?this.name=t.name:(o.gid++,this.name=o.gid.toString()),this.g.globalNodes[this.gid]=this}pxToInt(t){return parseInt(t.substring(0,t.length-2))}getComputed(t,e){const o=window.getComputedStyle(t,null).getPropertyValue(e);return o.endsWith("px")?this.pxToInt(o):parseInt(o)}updateDOMproperties(){let e=this.dom.getBoundingClientRect(),o=this.parent.dom.getBoundingClientRect();this.c_total_offset_x=(e.left-o.left)/this.g.zoom+e.width/2/this.g.zoom,this.c_total_offset_y=(e.top-o.top)/this.g.zoom+e.height/2/this.g.zoom}setLineXY(t,e,o){t.setAttribute("x1",""+0),t.setAttribute("y1",""+0),t.setAttribute("x2",""+e),t.setAttribute("y2",""+o),t.setAttribute("stroke-width","4")}}class vn extends ke{constructor(t,e,o,s){super(t,e,o);h(this,"inputDOM");h(this,"inter");h(this,"peerOutput");this.inter=s,this.inputDOM=null,this.peerOutput=null;const r=document.createElement("span");r.classList.add("sl-input-connector"),r.id=`input-${this.gid}`,r.onmousedown=this.domMouseDown.bind(this),this.dom=r}domMouseDown(t){this.peerOutput&&(super.domMouseDown(t),this.g.targetNode=this.peerOutput,this.g.dx_offset=(this.connector_x-this.peerOutput.connector_x)*this.g.zoom,this.g.dy_offset=(this.connector_y-this.peerOutput.connector_y)*this.g.zoom,this.g.dx=this.g.dx_offset,this.g.dy=this.g.dy_offset,this.peerOutput.customMouseDown(t),this.peerOutput.disconnectFromInput(this),t.stopPropagation())}updateConnectorPosition(){this.connector_x=this.parent.position_x+this.c_total_offset_x,this.connector_y=this.parent.position_y+this.c_total_offset_y}disconnectFromOutput(){var t,e;this.peerOutput=null,this.inter.dom.classList.remove("connected"),(e=(t=this.inter.inputUI)==null?void 0:t.inputDOM)==null||e.setAttribute("disabled","false")}connectToOutput(t){var e,o,s;this.peerOutput=t,(e=this.inter.dom)==null||e.classList.add("connected"),(s=(o=this.inter.inputUI)==null?void 0:o.inputDOM)==null||s.setAttribute("disabled","true")}nodeDrag(){this.updateConnectorPosition(),this.peerOutput&&this.peerOutput.nodeDrag()}}class mn extends ke{constructor(t,e,o){super(t,e,o);h(this,"val");h(this,"svgTmp");h(this,"svgs");this.val=null,this.svgTmp={svg:null,line:null},this.svgs=[];const s=document.createElement("span");s.classList.add("sl-output-connector"),s.id=`output-${this.gid}`,s.onmousedown=this.domMouseDown.bind(this),this.dom=s}connectToInput(t){if(console.debug("Connecting to input: ",t),this===t.peerOutput){console.debug("Already connected");return}t.peerOutput&&(console.debug("Disconnecting from: ",t.peerOutput),t.peerOutput.disconnectFromInput(t),t.disconnectFromOutput()),console.debug("Now connecting to: ",t),t.connectToOutput(this);const e=this.createNewSVG(),o=e[0],s=e[1],r={svg:o,line:s,to:t,from:this,connector_x:this.connector_x,connector_y:this.connector_y,x2:0,y2:0,connector:this};this.svgs.push(r),this.g.globalLines.push(r),this.g.canvas.appendChild(o),this.setLineXY(s,t.connector_x-this.connector_x,t.connector_y-this.connector_y),this.parent.outputCount++,t.parent.inputCount++}disconnectFromInput(t){console.debug("Disconnecting from input: ",t);for(const e of this.svgs)if(e.to==t){this.g.canvas.removeChild(e.svg),this.svgs=this.svgs.filter(o=>o!=e),this.g.globalLines=this.g.globalLines.filter(o=>o!=e),console.debug("Deleted line: ",e);break}t.disconnectFromOutput(),this.parent.outputCount--,t.parent.inputCount--}updateConnectorPosition(){this.connector_x=this.parent.position_x+this.c_total_offset_x,this.connector_y=this.parent.position_y+this.c_total_offset_y}moveToParent(){if(this.updateConnectorPosition(),this.svgTmp.line&&(this.svgTmp.svg.style.transform=`translate3d(${this.connector_x}px, ${this.connector_y}px, 0)`),!(this.svgs.length<1))for(const t of this.svgs)t.svg.style.transform=`translate3d(${this.connector_x}px, ${this.connector_y}px, 0)`,t.connector_x=this.connector_x,t.connector_y=this.connector_y,t.x2=t.to.connector_x-this.connector_x,t.y2=t.to.connector_y-this.connector_y,this.setLineXY(t.line,t.x2,t.y2)}createNewSVG(){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.classList.add("sl-connector-svg"),t.style.pointerEvents="none",t.style.position="absolute",t.style.overflow="visible",t.setAttribute("width","4"),t.setAttribute("height","4"),t.style.willChange="transform";const e=document.createElementNS("http://www.w3.org/2000/svg","line");return e.classList.add("sl-connector-line"),e.setAttribute("stroke-width","4"),t.appendChild(e),this.updateConnectorPosition(),console.debug("connector x: "+this.connector_x),t.style.transform=`translate3d(${this.connector_x}px, ${this.connector_y}px, 0)`,this.g.canvas.appendChild(t),[t,e]}customMouseDown(t){const e=this.createNewSVG();this.svgTmp.svg=e[0],this.svgTmp.line=e[1],this.moveToParent(),this.setLineXY(this.svgTmp.line,this.g.dx,this.g.dy)}onDrag(){let t=9999,e=0,o=0;const s=this.g.hoverDOM;if(s&&s.id&&s.id.startsWith("input-")){const r=s.id.split("-")[1],a=this.g.globalNodes[r];a.updateConnectorPosition(),e=a.connector_x,o=a.connector_y,t=Math.sqrt(Math.pow(this.connector_x+this.g.dx/this.g.zoom-e,2)+Math.pow(this.connector_y+this.g.dy/this.g.zoom-o,2))}t<40?this.setLineXY(this.svgTmp.line,e-this.connector_x,o-this.connector_y):this.setLineXY(this.svgTmp.line,this.g.dx/this.g.zoom,this.g.dy/this.g.zoom)}nodeDrag(){this.moveToParent()}domMouseUp(){const t=this.g.hoverDOM;if(t&&t.id&&t.id.startsWith("input-")){console.debug("Connecting to input: ",t.id);const e=this.g.globalNodes[t.id.split("-")[1]];this.connectToInput(e),e.parent.run()}this.g.canvas.removeChild(this.svgTmp.svg),this.svgTmp={svg:null,line:null}}getValue(){return this.parent.exec(),this.val}}class wt extends ct{constructor(t,e,o,s){super(t,e,o);h(this,"inputDOM");h(this,"inputItf");this.inputDOM=null,this.inputItf=s}triggerExec(t){var e;(e=this.inputItf.parent)==null||e.run()}}class _n extends wt{constructor(i,t,e,o){super(i,t,e,o),lt(o.dom,i);const s=document.createElement("input");s.classList.add("sl-input-text"),s.type="text",o.dom.appendChild(s),this.inputDOM=s,s.onkeyup=this.triggerExec.bind(this)}getInputValue(){return this.inputDOM.value}}class bn extends wt{constructor(i,t,e,o){super(i,t,e,o),lt(o.dom,i);const s=document.createElement("input");s.classList.add("sl-input-bool"),s.type="checkbox",o.dom.appendChild(s),this.inputDOM=s,s.onkeyup=this.triggerExec.bind(this)}getInputValue(){return this.inputDOM.checked}}class wn extends wt{constructor(t,e,o,s){super(t,e,o,s);h(this,"cur_w");h(this,"x_cur");h(this,"x_min");h(this,"x_max");h(this,"slider_w");h(this,"floatSliderContainer");h(this,"floatSlider");h(this,"floatEditor");h(this,"floatContainer");this.x_cur=0,this.x_min="x_min"in t?t.x_min:0,this.x_max="x_max"in t?t.x_max:this.x_min+1,this.slider_w=0,this.cur_w=0;const r=document.createElement("div"),a=document.createElement("input"),l=document.createElement("div"),u=document.createElement("div");r.classList.add("sl-input-float-container"),r.style.position="relative",r.style.overflow="hidden",r.style.flexGrow="1",r.style.display="flex",a.classList.add("sl-input-float-editor"),a.style.backgroundColor="transparent",a.style.position="relative",a.style.width="100%",a.type="text",a.style.textAlign="right",a.style.zIndex="10",l.classList.add("sl-input-float-slider-container"),l.style.position="relative",l.style.zIndex="1",l.style.overflow="hidden",u.classList.add("sl-input-float-slider"),u.style.width="10px",u.style.height="100%",u.style.top="0px",u.style.left="0",u.style.position="absolute",u.style.zIndex="10",l.appendChild(u),lt(r,t),r.appendChild(l),l.appendChild(a),s.dom.appendChild(r),this.inputDOM=a,a.onchange=this.triggerExec.bind(this),u.onmousedown=this.triggerExec.bind(this),this.floatSlider=u,this.floatEditor=a,this.floatContainer=r,this.floatSliderContainer=l,this.bindFunction(r)}customMouseDown(){this.cur_w=parseInt(this.floatSlider.style.width,10),this.slider_w=this.floatSliderContainer.getBoundingClientRect().width/this.g.zoom,console.log(this.slider_w),this.floatEditor.blur()}onDrag(){var r;this.floatEditor.blur();const t=50,e=(this.x_max-this.x_min)/t,o=this.slider_w/t;let s=this.cur_w+this.g.dx/this.g.zoom;s=Math.ceil(s/o)*o,s=Math.min(Math.max(s,0),this.slider_w),this.floatSlider.style.width=s+"px",this.x_cur=Math.min(Math.max(this.x_min+s/this.slider_w,this.x_min),this.x_max),this.x_cur=Math.ceil(this.x_cur/e)*e,this.floatEditor.value=this.x_cur.toFixed(3),(r=this.inputItf.parent)==null||r.run()}domMouseUp(){this.floatEditor.focus()}getInputValue(){return parseFloat(this.inputDOM.value)}}class yn extends wt{constructor(t,e,o,s){super(t,e,o,s);h(this,"x_cur");h(this,"floatSliderContainer");h(this,"floatEditor");h(this,"floatContainer");this.x_cur=0;const r=document.createElement("div"),a=document.createElement("input"),l=document.createElement("div");r.classList.add("sl-input-float-container"),r.style.position="relative",r.style.overflow="hidden",r.style.flexGrow="1",r.style.display="flex",a.classList.add("sl-input-float-editor"),a.style.backgroundColor="transparent",a.style.position="relative",a.style.width="100%",a.type="text",a.style.textAlign="right",a.style.zIndex="10",l.classList.add("sl-input-float-slider-container"),l.style.position="relative",l.style.zIndex="1",l.style.overflow="hidden",lt(r,t),r.appendChild(l),l.appendChild(a),s.dom.appendChild(r),this.inputDOM=a,a.onchange=this.triggerExec.bind(this),this.floatEditor=a,this.floatContainer=r,this.floatSliderContainer=l,this.bindFunction(r)}customMouseDown(){this.x_cur=parseFloat(this.floatEditor.value)||0,this.floatEditor.blur()}onDrag(){var o;this.floatEditor.blur();const t=.1;let e=Math.ceil((this.x_cur+this.g.dx*.1)/t)*t;this.floatEditor.value=e.toFixed(3),(o=this.inputItf.parent)==null||o.run()}domMouseUp(){this.floatEditor.focus()}getInputValue(){return parseFloat(this.inputDOM.value)}}class Ce extends ct{constructor(t,e,o){super(t,e,o);h(this,"name");this.name=t.name,this.parent.elements[this.name]=this}}class xn extends Ce{constructor(t,e,o){super(t,e,o);h(this,"input");h(this,"inputUI");h(this,"name");const s=document.createElement("div");switch(s.classList.add("sl-input"),s.style.position="relative",this.input=new vn(t,e,o,this),s.appendChild(this.input.dom),this.dom=s,this.name=t.name,this.parent.elements[this.name]=this,t.type){case"input-text":this.inputUI=new _n(t,e,o,this);break;case"input-bool":this.inputUI=new bn(t,e,o,this);break;case"input-float":this.inputUI=new wn(t,e,o,this);break;case"input-float-infinite":this.inputUI=new yn(t,e,o,this);break;default:this.inputUI=null}this.bindFunction(this.dom)}getValue(){return this.input.peerOutput?this.input.peerOutput.getValue():this.inputUI?this.inputUI.getInputValue():null}}class kn extends Ce{constructor(t,e,o){super(t,e,o);h(this,"output");h(this,"name");const s=document.createElement("div");s.classList.add("sl-output"),s.style.position="relative",lt(s,t),this.output=new mn(t,e,o),s.appendChild(this.output.dom),this.dom=s,this.name=t.name,this.parent.elements[this.name]=this}getValue(){return this.parent.exec(),this.output.val}setValue(t){this.output.val=t}}class Cn extends ct{constructor(t,e,o,s){super(t,e,o);h(this,"parentContent");h(this,"getUIvalue");h(this,"setUIvalue");h(this,"name");this.parentContent=s,this.name=t.name,this.getUIvalue=()=>null,this.setUIvalue=l=>{console.debug(l)};const r=document.createElement("div");switch(r.classList.add("sl-ui"),t.type){case"ui-paragraph":const l=document.createElement("p");l.style.pointerEvents="none",l.innerText=t.text,r.appendChild(l);break;case"ui-display":const u=document.createElement("p");u.style.pointerEvents="none",u.innerText="Output",r.appendChild(u),this.setSetFunction(c=>{u.innerText=c});break;case"ui-dropdown":const d=document.createElement("select");d.classList.add("sl-ui-dropdown");for(const c of t.values){const f=document.createElement("option");f.innerText=c.label,f.value=c.value,d.appendChild(f)}r.appendChild(d),this.setGetFunction(()=>d.value),this.setExecTrigger(d,"change");break}this.dom=r,this.name&&(this.parent.elements[this.name]=this)}setExecTrigger(t,e){t.addEventListener(e,()=>{var o;(o=this.parent)==null||o.run()}),console.debug(t,e)}setGetFunction(t){this.getUIvalue=t}setSetFunction(t){this.setUIvalue=t}getValue(){return this.getUIvalue()}setValue(t){return this.setUIvalue(t)}}class En extends ct{constructor(t,e,o,s){super(t,e,o);h(this,"parentContent");h(this,"getUIvalue");h(this,"setUIvalue");this.parentContent=s,this.getUIvalue=()=>null,this.setUIvalue=a=>{console.debug(a)};const r=document.createElement("template");r.innerHTML=t.html.trim(),this.dom=r.content.firstChild}setExecTrigger(t,e){console.debug(t,e)}setGetFunction(t){this.getUIvalue=t}setSetFunction(t){this.setUIvalue=t}getValue(){return this.getUIvalue()}setValue(t){return this.setUIvalue(t)}}class $t extends xe{constructor(t,e,o=0,s=0){super(e);h(this,"config");h(this,"inputs");h(this,"outputs");h(this,"inputCount");h(this,"outputCount");h(this,"elements");h(this,"dom");h(this,"hasIandO");h(this,"nodeWidth");h(this,"nodeHeight");h(this,"nodeContainerWidth");h(this,"nodeContainerHeight");h(this,"nodeContainerOffsetLeft");h(this,"nodeContainerOffsetTop");h(this,"functions");h(this,"pan_start_x");h(this,"pan_start_y");h(this,"overlapping");h(this,"freeze");this.config=t,this.position_x=o,this.position_y=s,this.inputs=[],this.outputs=[],this.inputCount=0,this.outputCount=0,this.elements={},this.pan_start_x=0,this.pan_start_y=0,this.overlapping=null,this.freeze=!1;const r=document.createElement("div");r.classList.add("sl-node"),r.style.willChange="transform",r.style.position="absolute",r.style.transformOrigin="top left",r.style.position="absolute";const a=document.createElement("div");a.classList.add("sl-node-container"),a.style.position="relative";for(const l of t.elements){const u=document.createElement("div");if(u.style.position="relative",u.style.display="flex",u.style.flexDirection="row",u.classList.add("sl-node-content"),a.appendChild(u),l instanceof Array)for(const d of l){const c=this._initParseComponent(d,u);c&&u.appendChild(c.dom)}else{const d=this._initParseComponent(l,u);d&&u.appendChild(d.dom)}a.appendChild(u)}if(r.appendChild(a),r.id=this.gid,r.onmousedown=this.domMouseDown.bind(this),this.dom=r,this.inputs.length>0&&this.outputs.length>0?this.hasIandO=!0:this.hasIandO=!1,this.g.canvas.appendChild(r),this.nodeWidth=r.offsetWidth,this.nodeHeight=r.offsetHeight,this.nodeContainerWidth=a.offsetWidth,this.nodeContainerHeight=a.offsetHeight,this.nodeContainerOffsetLeft=a.offsetLeft,this.nodeContainerOffsetTop=a.offsetTop,this.updateDOMproperties(),this.g.nodeArray.push(this),new ResizeObserver(()=>{this.updateDOMproperties()}).observe(this.dom),this.functions=[],t.functions){this.functions=t.functions;for(const[l,u]of Object.entries(this.functions))u.functionInit!==void 0&&u.functionInit(this)}}findInput(t){for(const e of this.inputs)if(e.gid===t)return e;return null}findOutput(t){for(const e of this.outputs)if(e.gid===t)return e;return null}_initParseComponent(t,e){let o=null;switch(t.type){case"input-text":case"input-bool":case"input-float":case"input-float-infinite":o=new xn(t,this,this.g),o.parent=this,this.g.globalNodes[o.gid]=o,this.inputs.push(o);break;case"output-text":o=new kn(t,this,this.g),o.parent=this,this.g.globalNodes[o.gid]=o,this.outputs.push(o);break;case"ui-display":case"ui-dropdown":case"ui-paragraph":o=new Cn(t,this,this.g,e),o.parent=this,this.g.globalNodes[o.gid]=o;break;case"custom":o=new En(t,this,this.g,e),o.parent=this,this.g.globalNodes[o.gid]=o;break;default:console.warn("Unknown type "+t.type)}return o}customMouseDown(t){this.pan_start_x=this.position_x,this.pan_start_y=this.position_y,this.g.focusNode=this}domMouseUp(){if(this.freeze||(this.position_x=this.pan_start_x+this.g.dx/this.g.zoom,this.position_y=this.pan_start_y+this.g.dy/this.g.zoom,this.overlapping==null))return;const t=this.overlapping.from,e=this.overlapping.to,o=this.inputs[0],s=this.outputs[0];t.disconnectFromInput(e),t.connectToInput(o.input),s.output.connectToInput(e)}onDrag(){if(this.freeze)return;this.position_x=this.pan_start_x+this.g.dx/this.g.zoom,this.position_y=this.pan_start_y+this.g.dy/this.g.zoom,this.dom.style.transform=`translate3d(${this.position_x}px, ${this.position_y}px, 0)`;for(const e of this.inputs)e.input.nodeDrag();for(const e of this.outputs)e.output.nodeDrag();if(this.overlapping=null,!this.hasIandO||this.outputCount>0||this.inputCount>0)return;let t=9999;for(const e of this.g.globalLines)e.line.classList.remove("overlapping"),ue(this.position_x+this.nodeWidth/2,e.connector_x,e.connector_x+e.x2)&&ue(this.position_y+this.nodeHeight/2,e.connector_y,e.connector_y+e.y2)&&(e.y2+e.connector_x)/2<t&&(this.overlapping=e,t=(e.y2+this.position_y)/2);!this.overlapping||this.overlapping.line.classList.add("overlapping")}onFocus(){for(const t of this.g.nodeArray)t.dom.classList.remove("focused"),t.dom.style.zIndex="10";this.dom.classList.add("focused"),this.dom.style.zIndex="20",this.updateDOMproperties()}offFocus(){this.dom.classList.remove("focused"),this.dom.style.zIndex="10"}updateDOMproperties(){this.nodeHeight=this.dom.offsetHeight,this.nodeWidth=this.dom.offsetWidth;for(const t of this.inputs)t.input.updateDOMproperties();for(const t of this.outputs)t.output.updateDOMproperties()}run(){var e;let t=0;for(const[o,s]of Object.entries(this.functions))for(const r of s.outputs){const a=this.elements[r];if(a==null){console.warn(`Output '${r}' was not found in elements. Double check '${r}' is defined.`);return}if(!(!a.output.svgs||a.output.svgs.length<1)){t++;for(const l of a.output.svgs)(e=l.to.parent)==null||e.run()}}t===0&&this.exec()}exec(){if(!!this.functions)for(const[t,e]of Object.entries(this.functions)){const o=[this];for(const a of e.inputs)if(a in this.elements){const l=this.elements[a];o.push(l.getValue())}const s=e.functionUpdate(...o);let r=0;for(const a of e.outputs){const l=this.elements[a];if(l==null){console.warn(`Output '${a}' was not found in elements. Double check '${a}' is defined.`);return}s instanceof Array?l.setValue(s[r++]):l.setValue(s)}}}}class In{constructor(i){h(this,"g");this.g={canvas:null,canvasContainer:null,canvasBackground:null,isMouseDown:!1,mousedown_x:0,mousedown_y:0,mouse_x:0,mouse_y:0,camera_pan_start_x:0,camera_pan_start_y:0,dx:0,dy:0,dx_offset:0,dy_offset:0,camera_x:0,camera_y:0,zoom:1,cameraWidth:0,cameraHeight:0,targetNode:null,focusNode:null,hoverDOM:null,gid:0,nodeArray:[],globalLines:[],globalNodes:{}};const t=this.g;if(t.canvasContainer=document.getElementById(i),!t.canvasContainer){console.error("Canvas not found");return}t.cameraWidth=t.canvasContainer.clientWidth,t.cameraHeight=t.canvasContainer.clientHeight,console.debug(`Canvas size: ${t.cameraWidth}x${t.cameraHeight}`);const e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.className="canvas",t.canvasContainer.appendChild(e),t.canvas=e,t.canvas.style.transform=`translate(${t.cameraWidth/2}px, ${t.cameraHeight/2}px)`,t.canvasContainer.tabIndex=0;const o=document.createElement("div");o.id="sl-background",o.style.width=t.cameraWidth*10+"px",o.style.height=t.cameraHeight*10+"px",o.style.transform=`translate(${-t.cameraWidth*5}px, ${-t.cameraHeight*5}px)`,o.style.transformOrigin="center",o.style.zIndex="0",o.style.position="absolute",t.canvas.appendChild(o),t.canvasBackground=o,t.canvasContainer.addEventListener("mousedown",function(s){t.isMouseDown=!0,t.mousedown_x=s.clientX,t.mousedown_y=s.clientY,t.camera_pan_start_x=t.camera_x,t.camera_pan_start_y=t.camera_y,t.focusNode=null;for(const r of t.nodeArray)r.offFocus()}),t.canvasContainer.addEventListener("mousemove",function(s){t.hoverDOM=s.target,t.mouse_x=s.clientX-t.canvasContainer.offsetLeft,t.mouse_y=s.clientY-t.canvasContainer.offsetTop,t.isMouseDown&&(t.dx=s.clientX-t.mousedown_x+t.dx_offset,t.dy=s.clientY-t.mousedown_y+t.dy_offset,t.targetNode==null&&(t.camera_x=t.camera_pan_start_x-t.dx/t.zoom,t.camera_y=t.camera_pan_start_y-t.dy/t.zoom,t.canvas.style.transform=`matrix3d(${de(t.camera_x,t.camera_y,t)})`,t.canvasBackground.style.transform=`translate(${t.camera_x+-t.cameraWidth*5}px, ${t.camera_y+-t.cameraHeight*5}px)`,t.canvasBackground.style.backgroundPosition=`${-t.camera_x}px ${-t.camera_y}px`,t.canvas.style.cursor="grabbing"))}),t.canvasContainer.addEventListener("wheel",function(s){let r=1*t.zoom*(-s.deltaY/600);s.preventDefault(),t.zoom+r<.2?(t.zoom=.2,r=0):t.zoom+r>3&&(t.zoom=3,r=0);const a=(t.mouse_x-t.cameraWidth/2)*r,l=(t.mouse_y-t.cameraHeight/2)*r;t.zoom+=r,t.camera_x+=a/t.zoom/t.zoom,t.camera_y+=l/t.zoom/t.zoom,t.canvas.style.transform=`matrix3d(${de(t.camera_x,t.camera_y,t)})`,s.preventDefault()}),t.canvasContainer.addEventListener("mouseup",function(s){t.isMouseDown=!1,t.canvas.style.cursor="default",t.targetNode==null||t.targetNode.domMouseUp(),t.targetNode=null,t.dx=0,t.dy=0,t.dx_offset=0,t.dy_offset=0}),t.canvasContainer.addEventListener("keydown",s=>{switch(s.key){case"Delete":t.focusNode&&(console.debug("Delete Node "+t.focusNode.gid),this.deleteNode(t.focusNode.gid));break}}),console.info("Initialized SnapLine..."),window.requestAnimationFrame(this.step.bind(this))}step(){this.g.targetNode&&this.g.targetNode.onDrag(),window.requestAnimationFrame(this.step.bind(this))}addNode(i,t,e){const o=new $t(i,this.g,t,e);return this.g.globalNodes[o.gid]=o,this.focusNode(o.gid),o}deleteNode(i){var e;if(!(i in this.g.globalNodes))return null;const t=this.g.globalNodes[i];return(e=this.g.canvas)==null||e.removeChild(t.dom),delete this.g.globalNodes[i],i}focusNode(i){return i in this.g.globalNodes?(this.g.globalNodes[i].onFocus(),i):null}connectNodes(i,t,e,o){const s=this.g.globalNodes[i],r=this.g.globalNodes[e];if(!s||!r||!(s instanceof $t)||!(r instanceof $t))return null;const a=s.findOutput(t),l=r.findInput(o);return!a||!l?null:(a.output.connectToInput(l.input),0)}}/*!
 * iro.js v5.5.2
 * 2016-2021 James Daniel
 * Licensed under MPL 2.0
 * github.com/jaames/iro.js
 */var k,mt,Ee,Ut,Ie,R={},Bt=[],Sn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function $(n,i){for(var t in i)n[t]=i[t];return n}function Se(n){var i=n.parentNode;i&&i.removeChild(n)}function w(n,i,t){var e,o,s,r,a=arguments;if(i=$({},i),arguments.length>3)for(t=[t],e=3;e<arguments.length;e++)t.push(a[e]);if(t!=null&&(i.children=t),n!=null&&n.defaultProps!=null)for(o in n.defaultProps)i[o]===void 0&&(i[o]=n.defaultProps[o]);return r=i.key,(s=i.ref)!=null&&delete i.ref,r!=null&&delete i.key,Ft(n,i,r,s)}function Ft(n,i,t,e){var o={type:n,props:i,key:t,ref:e,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return k.vnode&&k.vnode(o),o}function yt(n){return n.children}function On(n){if(n==null||typeof n=="boolean")return null;if(typeof n=="string"||typeof n=="number")return Ft(null,n,null,null);if(n.__e!=null||n.__c!=null){var i=Ft(n.type,n.props,n.key,null);return i.__e=n.__e,i}return n}function G(n,i){this.props=n,this.context=i}function _t(n,i){if(i==null)return n.__p?_t(n.__p,n.__p.__k.indexOf(n)+1):null;for(var t;i<n.__k.length;i++)if((t=n.__k[i])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?_t(n):null}function Oe(n){var i,t;if((n=n.__p)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,i=0;i<n.__k.length;i++)if((t=n.__k[i])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return Oe(n)}}function Rt(n){(!n.__d&&(n.__d=!0)&&mt.push(n)===1||Ut!==k.debounceRendering)&&(Ut=k.debounceRendering,(k.debounceRendering||Ee)(Mn))}function Mn(){var n,i,t,e,o,s,r,a;for(mt.sort(function(l,u){return u.__v.__b-l.__v.__b});n=mt.pop();)n.__d&&(t=void 0,e=void 0,s=(o=(i=n).__v).__e,r=i.__P,a=i.u,i.u=!1,r&&(t=[],e=Gt(r,o,$({},o),i.__n,r.ownerSVGElement!==void 0,null,t,a,s==null?_t(o):s),De(t,o),e!=s&&Oe(o)))}function Me(n,i,t,e,o,s,r,a,l){var u,d,c,f,p,b,_,C=t&&t.__k||Bt,y=C.length;if(a==R&&(a=s!=null?s[0]:y?_t(t,0):null),u=0,i.__k=Vt(i.__k,function(x){if(x!=null){if(x.__p=i,x.__b=i.__b+1,(c=C[u])===null||c&&x.key==c.key&&x.type===c.type)C[u]=void 0;else for(d=0;d<y;d++){if((c=C[d])&&x.key==c.key&&x.type===c.type){C[d]=void 0;break}c=null}if(f=Gt(n,x,c=c||R,e,o,s,r,null,a,l),(d=x.ref)&&c.ref!=d&&(_||(_=[])).push(d,x.__c||f,x),f!=null){if(b==null&&(b=f),x.l!=null)f=x.l,x.l=null;else if(s==c||f!=a||f.parentNode==null){t:if(a==null||a.parentNode!==n)n.appendChild(f);else{for(p=a,d=0;(p=p.nextSibling)&&d<y;d+=2)if(p==f)break t;n.insertBefore(f,a)}i.type=="option"&&(n.value="")}a=f.nextSibling,typeof i.type=="function"&&(i.l=f)}}return u++,x}),i.__e=b,s!=null&&typeof i.type!="function")for(u=s.length;u--;)s[u]!=null&&Se(s[u]);for(u=y;u--;)C[u]!=null&&ze(C[u],C[u]);if(_)for(u=0;u<_.length;u++)Ne(_[u],_[++u],_[++u])}function Vt(n,i,t){if(t==null&&(t=[]),n==null||typeof n=="boolean")i&&t.push(i(null));else if(Array.isArray(n))for(var e=0;e<n.length;e++)Vt(n[e],i,t);else t.push(i?i(On(n)):n);return t}function Dn(n,i,t,e,o){var s;for(s in t)s in i||fe(n,s,null,t[s],e);for(s in i)o&&typeof i[s]!="function"||s==="value"||s==="checked"||t[s]===i[s]||fe(n,s,i[s],t[s],e)}function he(n,i,t){i[0]==="-"?n.setProperty(i,t):n[i]=typeof t=="number"&&Sn.test(i)===!1?t+"px":t==null?"":t}function fe(n,i,t,e,o){var s,r,a,l,u;if(!((i=o?i==="className"?"class":i:i==="class"?"className":i)==="key"||i==="children"))if(i==="style")if(s=n.style,typeof t=="string")s.cssText=t;else{if(typeof e=="string"&&(s.cssText="",e=null),e)for(r in e)t&&r in t||he(s,r,"");if(t)for(a in t)e&&t[a]===e[a]||he(s,a,t[a])}else i[0]==="o"&&i[1]==="n"?(l=i!==(i=i.replace(/Capture$/,"")),u=i.toLowerCase(),i=(u in n?u:i).slice(2),t?(e||n.addEventListener(i,pe,l),(n.t||(n.t={}))[i]=t):n.removeEventListener(i,pe,l)):i!=="list"&&i!=="tagName"&&i!=="form"&&!o&&i in n?n[i]=t==null?"":t:typeof t!="function"&&i!=="dangerouslySetInnerHTML"&&(i!==(i=i.replace(/^xlink:?/,""))?t==null||t===!1?n.removeAttributeNS("http://www.w3.org/1999/xlink",i.toLowerCase()):n.setAttributeNS("http://www.w3.org/1999/xlink",i.toLowerCase(),t):t==null||t===!1?n.removeAttribute(i):n.setAttribute(i,t))}function pe(n){return this.t[n.type](k.event?k.event(n):n)}function Gt(n,i,t,e,o,s,r,a,l,u){var d,c,f,p,b,_,C,y,x,D,N=i.type;if(i.constructor!==void 0)return null;(d=k.__b)&&d(i);try{t:if(typeof N=="function"){if(y=i.props,x=(d=N.contextType)&&e[d.__c],D=d?x?x.props.value:d.__p:e,t.__c?C=(c=i.__c=t.__c).__p=c.__E:("prototype"in N&&N.prototype.render?i.__c=c=new N(y,D):(i.__c=c=new G(y,D),c.constructor=N,c.render=zn),x&&x.sub(c),c.props=y,c.state||(c.state={}),c.context=D,c.__n=e,f=c.__d=!0,c.__h=[]),c.__s==null&&(c.__s=c.state),N.getDerivedStateFromProps!=null&&$(c.__s==c.state?c.__s=$({},c.__s):c.__s,N.getDerivedStateFromProps(y,c.__s)),f)N.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&r.push(c);else{if(N.getDerivedStateFromProps==null&&a==null&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(y,D),!a&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(y,c.__s,D)===!1){for(c.props=y,c.state=c.__s,c.__d=!1,c.__v=i,i.__e=l!=null?l!==t.__e?l:t.__e:null,i.__k=t.__k,d=0;d<i.__k.length;d++)i.__k[d]&&(i.__k[d].__p=i);break t}c.componentWillUpdate!=null&&c.componentWillUpdate(y,c.__s,D)}for(p=c.props,b=c.state,c.context=D,c.props=y,c.state=c.__s,(d=k.__r)&&d(i),c.__d=!1,c.__v=i,c.__P=n,d=c.render(c.props,c.state,c.context),i.__k=Vt(d!=null&&d.type==yt&&d.key==null?d.props.children:d),c.getChildContext!=null&&(e=$($({},e),c.getChildContext())),f||c.getSnapshotBeforeUpdate==null||(_=c.getSnapshotBeforeUpdate(p,b)),Me(n,i,t,e,o,s,r,l,u),c.base=i.__e;d=c.__h.pop();)c.__s&&(c.state=c.__s),d.call(c);f||p==null||c.componentDidUpdate==null||c.componentDidUpdate(p,b,_),C&&(c.__E=c.__p=null)}else i.__e=Nn(t.__e,i,t,e,o,s,r,u);(d=k.diffed)&&d(i)}catch(X){k.__e(X,i,t)}return i.__e}function De(n,i){for(var t;t=n.pop();)try{t.componentDidMount()}catch(e){k.__e(e,t.__v)}k.__c&&k.__c(i)}function Nn(n,i,t,e,o,s,r,a){var l,u,d,c,f=t.props,p=i.props;if(o=i.type==="svg"||o,n==null&&s!=null){for(l=0;l<s.length;l++)if((u=s[l])!=null&&(i.type===null?u.nodeType===3:u.localName===i.type)){n=u,s[l]=null;break}}if(n==null){if(i.type===null)return document.createTextNode(p);n=o?document.createElementNS("http://www.w3.org/2000/svg",i.type):document.createElement(i.type),s=null}return i.type===null?f!==p&&(s!=null&&(s[s.indexOf(n)]=null),n.data=p):i!==t&&(s!=null&&(s=Bt.slice.call(n.childNodes)),d=(f=t.props||R).dangerouslySetInnerHTML,c=p.dangerouslySetInnerHTML,a||(c||d)&&(c&&d&&c.__html==d.__html||(n.innerHTML=c&&c.__html||"")),Dn(n,p,f,o,a),i.__k=i.props.children,c||Me(n,i,t,e,i.type!=="foreignObject"&&o,s,r,R,a),a||("value"in p&&p.value!==void 0&&p.value!==n.value&&(n.value=p.value==null?"":p.value),"checked"in p&&p.checked!==void 0&&p.checked!==n.checked&&(n.checked=p.checked))),n}function Ne(n,i,t){try{typeof n=="function"?n(i):n.current=i}catch(e){k.__e(e,t)}}function ze(n,i,t){var e,o,s;if(k.unmount&&k.unmount(n),(e=n.ref)&&Ne(e,null,i),t||typeof n.type=="function"||(t=(o=n.__e)!=null),n.__e=n.l=null,(e=n.__c)!=null){if(e.componentWillUnmount)try{e.componentWillUnmount()}catch(r){k.__e(r,i)}e.base=e.__P=null}if(e=n.__k)for(s=0;s<e.length;s++)e[s]&&ze(e[s],i,t);o!=null&&Se(o)}function zn(n,i,t){return this.constructor(n,t)}function Tn(n,i,t){var e,o,s;k.__p&&k.__p(n,i),o=(e=t===Ie)?null:t&&t.__k||i.__k,n=w(yt,null,[n]),s=[],Gt(i,e?i.__k=n:(t||i).__k=n,o||R,R,i.ownerSVGElement!==void 0,t&&!e?[t]:o?null:Bt.slice.call(i.childNodes),s,!1,t||R,e),De(s,n)}k={},G.prototype.setState=function(n,i){var t=this.__s!==this.state&&this.__s||(this.__s=$({},this.state));(typeof n!="function"||(n=n(t,this.props)))&&$(t,n),n!=null&&this.__v&&(this.u=!1,i&&this.__h.push(i),Rt(this))},G.prototype.forceUpdate=function(n){this.__v&&(n&&this.__h.push(n),this.u=!0,Rt(this))},G.prototype.render=yt,mt=[],Ee=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ut=k.debounceRendering,k.__e=function(n,i,t){for(var e;i=i.__p;)if((e=i.__c)&&!e.__p)try{if(e.constructor&&e.constructor.getDerivedStateFromError!=null)e.setState(e.constructor.getDerivedStateFromError(n));else{if(e.componentDidCatch==null)continue;e.componentDidCatch(n)}return Rt(e.__E=e)}catch(o){n=o}throw n},Ie=R;function ge(n,i){for(var t=0;t<i.length;t++){var e=i[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function An(n,i,t){return i&&ge(n.prototype,i),t&&ge(n,t),n}function M(){return M=Object.assign||function(n){for(var i=arguments,t=1;t<arguments.length;t++){var e=i[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},M.apply(this,arguments)}var $n="[-\\+]?\\d+%?",Rn="[-\\+]?\\d*\\.\\d+%?",P="(?:"+Rn+")|(?:"+$n+")",Te="[\\s|\\(]+("+P+")[,|\\s]+("+P+")[,|\\s]+("+P+")\\s*\\)?",Ae="[\\s|\\(]+("+P+")[,|\\s]+("+P+")[,|\\s]+("+P+")[,|\\s]+("+P+")\\s*\\)?",Ln=new RegExp("rgb"+Te),Pn=new RegExp("rgba"+Ae),Hn=new RegExp("hsl"+Te),Un=new RegExp("hsla"+Ae),xt="^(?:#?|0x?)",H="([0-9a-fA-F]{1})",U="([0-9a-fA-F]{2})",Fn=new RegExp(xt+H+H+H+"$"),Wn=new RegExp(xt+H+H+H+H+"$"),jn=new RegExp(xt+U+U+U+"$"),Bn=new RegExp(xt+U+U+U+U+"$"),Vn=2e3,Gn=4e4,pt=Math.log,B=Math.round,it=Math.floor;function z(n,i,t){return Math.min(Math.max(n,i),t)}function S(n,i){var t=n.indexOf("%")>-1,e=parseFloat(n);return t?i/100*e:e}function O(n){return parseInt(n,16)}function L(n){return n.toString(16).padStart(2,"0")}var V=function(){function n(t,e){this.$={h:0,s:0,v:0,a:1},t&&this.set(t),this.onChange=e,this.initialValue=M({},this.$)}var i=n.prototype;return i.set=function(e){if(typeof e=="string")/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(e)?this.hexString=e:/^rgba?/.test(e)?this.rgbString=e:/^hsla?/.test(e)&&(this.hslString=e);else if(typeof e=="object")e instanceof n?this.hsva=e.hsva:"r"in e&&"g"in e&&"b"in e?this.rgb=e:"h"in e&&"s"in e&&"v"in e?this.hsv=e:"h"in e&&"s"in e&&"l"in e?this.hsl=e:"kelvin"in e&&(this.kelvin=e.kelvin);else throw new Error("Invalid color value")},i.setChannel=function(e,o,s){var r;this[e]=M({},this[e],(r={},r[o]=s,r))},i.reset=function(){this.hsva=this.initialValue},i.clone=function(){return new n(this)},i.unbind=function(){this.onChange=void 0},n.hsvToRgb=function(e){var o=e.h/60,s=e.s/100,r=e.v/100,a=it(o),l=o-a,u=r*(1-s),d=r*(1-l*s),c=r*(1-(1-l)*s),f=a%6,p=[r,d,u,u,c,r][f],b=[c,r,r,d,u,u][f],_=[u,u,c,r,r,d][f];return{r:z(p*255,0,255),g:z(b*255,0,255),b:z(_*255,0,255)}},n.rgbToHsv=function(e){var o=e.r/255,s=e.g/255,r=e.b/255,a=Math.max(o,s,r),l=Math.min(o,s,r),u=a-l,d=0,c=a,f=a===0?0:u/a;switch(a){case l:d=0;break;case o:d=(s-r)/u+(s<r?6:0);break;case s:d=(r-o)/u+2;break;case r:d=(o-s)/u+4;break}return{h:d*60%360,s:z(f*100,0,100),v:z(c*100,0,100)}},n.hsvToHsl=function(e){var o=e.s/100,s=e.v/100,r=(2-o)*s,a=r<=1?r:2-r,l=a<1e-9?0:o*s/a;return{h:e.h,s:z(l*100,0,100),l:z(r*50,0,100)}},n.hslToHsv=function(e){var o=e.l*2,s=e.s*(o<=100?o:200-o)/100,r=o+s<1e-9?0:2*s/(o+s);return{h:e.h,s:z(r*100,0,100),v:z((o+s)/2,0,100)}},n.kelvinToRgb=function(e){var o=e/100,s,r,a;return o<66?(s=255,r=-155.25485562709179-.44596950469579133*(r=o-2)+104.49216199393888*pt(r),a=o<20?0:-254.76935184120902+.8274096064007395*(a=o-10)+115.67994401066147*pt(a)):(s=351.97690566805693+.114206453784165*(s=o-55)-40.25366309332127*pt(s),r=325.4494125711974+.07943456536662342*(r=o-50)-28.0852963507957*pt(r),a=255),{r:z(it(s),0,255),g:z(it(r),0,255),b:z(it(a),0,255)}},n.rgbToKelvin=function(e){for(var o=e.r,s=e.b,r=.4,a=Vn,l=Gn,u;l-a>r;){u=(l+a)*.5;var d=n.kelvinToRgb(u);d.b/d.r>=s/o?l=u:a=u}return u},An(n,[{key:"hsv",get:function(){var e=this.$;return{h:e.h,s:e.s,v:e.v}},set:function(e){var o=this.$;if(e=M({},o,e),this.onChange){var s={h:!1,v:!1,s:!1,a:!1};for(var r in o)s[r]=e[r]!=o[r];this.$=e,(s.h||s.s||s.v||s.a)&&this.onChange(this,s)}else this.$=e}},{key:"hsva",get:function(){return M({},this.$)},set:function(e){this.hsv=e}},{key:"hue",get:function(){return this.$.h},set:function(e){this.hsv={h:e}}},{key:"saturation",get:function(){return this.$.s},set:function(e){this.hsv={s:e}}},{key:"value",get:function(){return this.$.v},set:function(e){this.hsv={v:e}}},{key:"alpha",get:function(){return this.$.a},set:function(e){this.hsv=M({},this.hsv,{a:e})}},{key:"kelvin",get:function(){return n.rgbToKelvin(this.rgb)},set:function(e){this.rgb=n.kelvinToRgb(e)}},{key:"red",get:function(){var e=this.rgb;return e.r},set:function(e){this.rgb=M({},this.rgb,{r:e})}},{key:"green",get:function(){var e=this.rgb;return e.g},set:function(e){this.rgb=M({},this.rgb,{g:e})}},{key:"blue",get:function(){var e=this.rgb;return e.b},set:function(e){this.rgb=M({},this.rgb,{b:e})}},{key:"rgb",get:function(){var e=n.hsvToRgb(this.$),o=e.r,s=e.g,r=e.b;return{r:B(o),g:B(s),b:B(r)}},set:function(e){this.hsv=M({},n.rgbToHsv(e),{a:e.a===void 0?1:e.a})}},{key:"rgba",get:function(){return M({},this.rgb,{a:this.alpha})},set:function(e){this.rgb=e}},{key:"hsl",get:function(){var e=n.hsvToHsl(this.$),o=e.h,s=e.s,r=e.l;return{h:B(o),s:B(s),l:B(r)}},set:function(e){this.hsv=M({},n.hslToHsv(e),{a:e.a===void 0?1:e.a})}},{key:"hsla",get:function(){return M({},this.hsl,{a:this.alpha})},set:function(e){this.hsl=e}},{key:"rgbString",get:function(){var e=this.rgb;return"rgb("+e.r+", "+e.g+", "+e.b+")"},set:function(e){var o,s,r,a,l=1;if((o=Ln.exec(e))?(s=S(o[1],255),r=S(o[2],255),a=S(o[3],255)):(o=Pn.exec(e))&&(s=S(o[1],255),r=S(o[2],255),a=S(o[3],255),l=S(o[4],1)),o)this.rgb={r:s,g:r,b:a,a:l};else throw new Error("Invalid rgb string")}},{key:"rgbaString",get:function(){var e=this.rgba;return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},set:function(e){this.rgbString=e}},{key:"hexString",get:function(){var e=this.rgb;return"#"+L(e.r)+L(e.g)+L(e.b)},set:function(e){var o,s,r,a,l=255;if((o=Fn.exec(e))?(s=O(o[1])*17,r=O(o[2])*17,a=O(o[3])*17):(o=Wn.exec(e))?(s=O(o[1])*17,r=O(o[2])*17,a=O(o[3])*17,l=O(o[4])*17):(o=jn.exec(e))?(s=O(o[1]),r=O(o[2]),a=O(o[3])):(o=Bn.exec(e))&&(s=O(o[1]),r=O(o[2]),a=O(o[3]),l=O(o[4])),o)this.rgb={r:s,g:r,b:a,a:l/255};else throw new Error("Invalid hex string")}},{key:"hex8String",get:function(){var e=this.rgba;return"#"+L(e.r)+L(e.g)+L(e.b)+L(it(e.a*255))},set:function(e){this.hexString=e}},{key:"hslString",get:function(){var e=this.hsl;return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},set:function(e){var o,s,r,a,l=1;if((o=Hn.exec(e))?(s=S(o[1],360),r=S(o[2],100),a=S(o[3],100)):(o=Un.exec(e))&&(s=S(o[1],360),r=S(o[2],100),a=S(o[3],100),l=S(o[4],1)),o)this.hsl={h:s,s:r,l:a,a:l};else throw new Error("Invalid hsl string")}},{key:"hslaString",get:function(){var e=this.hsla;return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},set:function(e){this.hslString=e}}]),n}(),Xn={sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3};function Xt(n){var i,t=n.width,e=n.sliderSize,o=n.borderWidth,s=n.handleRadius,r=n.padding,a=n.sliderShape,l=n.layoutDirection==="horizontal";return e=(i=e)!=null?i:r*2+s*2,a==="circle"?{handleStart:n.padding+n.handleRadius,handleRange:t-r*2-s*2,width:t,height:t,cx:t/2,cy:t/2,radius:t/2-o/2}:{handleStart:e/2,handleRange:t-e,radius:e/2,x:0,y:0,width:l?e:t,height:l?t:e}}function Yn(n,i){var t=i.hsva,e=i.rgb;switch(n.sliderType){case"red":return e.r/2.55;case"green":return e.g/2.55;case"blue":return e.b/2.55;case"alpha":return t.a*100;case"kelvin":var o=n.minTemperature,s=n.maxTemperature,r=s-o,a=(i.kelvin-o)/r*100;return Math.max(0,Math.min(a,100));case"hue":return t.h/=3.6;case"saturation":return t.s;case"value":default:return t.v}}function qn(n,i,t){var e=Xt(n),o=e.handleRange,s=e.handleStart,r;n.layoutDirection==="horizontal"?r=-1*t+o+s:r=i-s,r=Math.max(Math.min(r,o),0);var a=Math.round(100/o*r);switch(n.sliderType){case"kelvin":var l=n.minTemperature,u=n.maxTemperature,d=u-l;return l+d*(a/100);case"alpha":return a/100;case"hue":return a*3.6;case"red":case"blue":case"green":return a*2.55;default:return a}}function Kn(n,i){var t=Xt(n),e=t.width,o=t.height,s=t.handleRange,r=t.handleStart,a=n.layoutDirection==="horizontal",l=Yn(n,i),u=a?e/2:o/2,d=r+l/100*s;return a&&(d=-1*d+s+r*2),{x:a?u:d,y:a?d:u}}function Qn(n,i){var t=i.hsv,e=i.rgb;switch(n.sliderType){case"red":return[[0,"rgb("+0+","+e.g+","+e.b+")"],[100,"rgb("+255+","+e.g+","+e.b+")"]];case"green":return[[0,"rgb("+e.r+","+0+","+e.b+")"],[100,"rgb("+e.r+","+255+","+e.b+")"]];case"blue":return[[0,"rgb("+e.r+","+e.g+","+0+")"],[100,"rgb("+e.r+","+e.g+","+255+")"]];case"alpha":return[[0,"rgba("+e.r+","+e.g+","+e.b+",0)"],[100,"rgb("+e.r+","+e.g+","+e.b+")"]];case"kelvin":for(var o=[],s=n.minTemperature,r=n.maxTemperature,a=8,l=r-s,u=s,d=0;u<r;u+=l/a,d+=1){var c=V.kelvinToRgb(u),f=c.r,p=c.g,b=c.b;o.push([100/a*d,"rgb("+f+","+p+","+b+")"])}return o;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var _=V.hsvToHsl({h:t.h,s:0,v:t.v}),C=V.hsvToHsl({h:t.h,s:100,v:t.v});return[[0,"hsl("+_.h+","+_.s+"%,"+_.l+"%)"],[100,"hsl("+C.h+","+C.s+"%,"+C.l+"%)"]];case"value":default:var y=V.hsvToHsl({h:t.h,s:t.s,v:100});return[[0,"#000"],[100,"hsl("+y.h+","+y.s+"%,"+y.l+"%)"]]}}var $e=Math.PI*2,Jn=function(i,t){return(i%t+t)%t},Re=function(i,t){return Math.sqrt(i*i+t*t)};function Le(n){return n.width/2-n.padding-n.handleRadius-n.borderWidth}function Zn(n,i,t){var e=kt(n),o=e.cx,s=e.cy,r=n.width/2;return Re(o-i,s-t)<r}function kt(n){var i=n.width/2;return{width:n.width,radius:i-n.borderWidth,cx:i,cy:i}}function Pe(n,i,t){var e=n.wheelAngle,o=n.wheelDirection;return t&&o==="clockwise"?i=e+i:o==="clockwise"?i=360-e+i:t&&o==="anticlockwise"?i=e+180-i:o==="anticlockwise"&&(i=e-i),Jn(i,360)}function ti(n,i){var t=i.hsv,e=kt(n),o=e.cx,s=e.cy,r=Le(n),a=(180+Pe(n,t.h,!0))*($e/360),l=t.s/100*r,u=n.wheelDirection==="clockwise"?-1:1;return{x:o+l*Math.cos(a)*u,y:s+l*Math.sin(a)*u}}function ve(n,i,t){var e=kt(n),o=e.cx,s=e.cy,r=Le(n);i=o-i,t=s-t;var a=Pe(n,Math.atan2(-t,-i)*(360/$e)),l=Math.min(Re(i,t),r);return{h:Math.round(a),s:Math.round(100/r*l)}}function Yt(n){var i=n.width,t=n.boxHeight,e=n.padding,o=n.handleRadius;return{width:i,height:t!=null?t:i,radius:e+o}}function me(n,i,t){var e=Yt(n),o=e.width,s=e.height,r=e.radius,a=r,l=o-r*2,u=s-r*2,d=(i-a)/l*100,c=(t-a)/u*100;return{s:Math.max(0,Math.min(d,100)),v:Math.max(0,Math.min(100-c,100))}}function ei(n,i){var t=Yt(n),e=t.width,o=t.height,s=t.radius,r=i.hsv,a=s,l=e-s*2,u=o-s*2;return{x:a+r.s/100*l,y:a+(u-r.v/100*u)}}function ni(n,i){var t=i.hue;return[[[0,"#fff"],[100,"hsl("+t+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]]}var Lt;function ii(n){Lt||(Lt=document.getElementsByTagName("base"));var i=window.navigator.userAgent,t=/^((?!chrome|android).)*safari/i.test(i),e=/iPhone|iPod|iPad/i.test(i),o=window.location;return(t||e)&&Lt.length>0?o.protocol+"//"+o.host+o.pathname+o.search+n:n}function He(n,i,t,e){for(var o=0;o<e.length;o++){var s=e[o].x-i,r=e[o].y-t,a=Math.sqrt(s*s+r*r);if(a<n.handleRadius)return o}return null}function qt(n){return{boxSizing:"border-box",border:n.borderWidth+"px solid "+n.borderColor}}function Wt(n,i,t){return n+"-gradient("+i+", "+t.map(function(e){var o=e[0],s=e[1];return s+" "+o+"%"}).join(",")+")"}function I(n){return typeof n=="string"?n:n+"px"}var oi={width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},_e=["mousemove","touchmove","mouseup","touchend"],Ct=function(n){function i(t){n.call(this,t),this.uid=(Math.random()+1).toString(36).substring(5)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.render=function(e){var o=this.handleEvent.bind(this),s={onMouseDown:o,ontouchstart:o},r=e.layoutDirection==="horizontal",a=e.margin===null?e.sliderMargin:e.margin,l={overflow:"visible",display:r?"inline-block":"block"};return e.index>0&&(l[r?"marginLeft":"marginTop"]=a),w(yt,null,e.children(this.uid,s,l))},i.prototype.handleEvent=function(e){var o=this,s=this.props.onInput,r=this.base.getBoundingClientRect();e.preventDefault();var a=e.touches?e.changedTouches[0]:e,l=a.clientX-r.left,u=a.clientY-r.top;switch(e.type){case"mousedown":case"touchstart":var d=s(l,u,0);d!==!1&&_e.forEach(function(c){document.addEventListener(c,o,{passive:!1})});break;case"mousemove":case"touchmove":s(l,u,1);break;case"mouseup":case"touchend":s(l,u,2),_e.forEach(function(c){document.removeEventListener(c,o,{passive:!1})});break}},i}(G);function F(n){var i=n.r,t=n.url,e=i,o=i;return w("svg",{className:"IroHandle IroHandle--"+n.index+" "+(n.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+I(n.x)+", "+I(n.y)+")",willChange:"transform",top:I(-i),left:I(-i),width:I(i*2),height:I(i*2),position:"absolute",overflow:"visible"}},t&&w("use",Object.assign({xlinkHref:ii(t)},n.props)),!t&&w("circle",{cx:e,cy:o,r:i,fill:"none","stroke-width":2,stroke:"#000"}),!t&&w("circle",{cx:e,cy:o,r:i-2,fill:n.fill,"stroke-width":2,stroke:"#fff"}))}F.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}};function bt(n){var i=n.activeIndex,t=i!==void 0&&i<n.colors.length?n.colors[i]:n.color,e=Xt(n),o=e.width,s=e.height,r=e.radius,a=Kn(n,t),l=Qn(n,t);function u(d,c,f){var p=qn(n,d,c);n.parent.inputActive=!0,t[n.sliderType]=p,n.onInput(f,n.id)}return w(Ct,Object.assign({},n,{onInput:u}),function(d,c,f){return w("div",Object.assign({},c,{className:"IroSlider",style:Object.assign({},{position:"relative",width:I(o),height:I(s),borderRadius:I(r),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},f)}),w("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:I(r),background:Wt("linear",n.layoutDirection==="horizontal"?"to top":"to right",l)},qt(n))}),w(F,{isActive:!0,index:t.index,r:n.handleRadius,url:n.handleSvg,props:n.handleProps,x:a.x,y:a.y}))})}bt.defaultProps=Object.assign({},Xn);function si(n){var i=Yt(n),t=i.width,e=i.height,o=i.radius,s=n.colors,r=n.parent,a=n.activeIndex,l=a!==void 0&&a<n.colors.length?n.colors[a]:n.color,u=ni(n,l),d=s.map(function(f){return ei(n,f)});function c(f,p,b){if(b===0){var _=He(n,f,p,d);_!==null?r.setActiveColor(_):(r.inputActive=!0,l.hsv=me(n,f,p),n.onInput(b,n.id))}else b===1&&(r.inputActive=!0,l.hsv=me(n,f,p));n.onInput(b,n.id)}return w(Ct,Object.assign({},n,{onInput:c}),function(f,p,b){return w("div",Object.assign({},p,{className:"IroBox",style:Object.assign({},{width:I(t),height:I(e),position:"relative"},b)}),w("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:I(o)},qt(n),{background:Wt("linear","to bottom",u[1])+","+Wt("linear","to right",u[0])})}),s.filter(function(_){return _!==l}).map(function(_){return w(F,{isActive:!1,index:_.index,fill:_.hslString,r:n.handleRadius,url:n.handleSvg,props:n.handleProps,x:d[_.index].x,y:d[_.index].y})}),w(F,{isActive:!0,index:l.index,fill:l.hslString,r:n.activeHandleRadius||n.handleRadius,url:n.handleSvg,props:n.handleProps,x:d[l.index].x,y:d[l.index].y}))})}var ri="conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",ai="conic-gradient(red, magenta, blue, aqua, lime, yellow, red)";function Ue(n){var i=kt(n),t=i.width,e=n.colors;n.borderWidth;var o=n.parent,s=n.color,r=s.hsv,a=e.map(function(d){return ti(n,d)}),l={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};function u(d,c,f){if(f===0){if(!Zn(n,d,c))return!1;var p=He(n,d,c,a);p!==null?o.setActiveColor(p):(o.inputActive=!0,s.hsv=ve(n,d,c),n.onInput(f,n.id))}else f===1&&(o.inputActive=!0,s.hsv=ve(n,d,c));n.onInput(f,n.id)}return w(Ct,Object.assign({},n,{onInput:u}),function(d,c,f){return w("div",Object.assign({},c,{className:"IroWheel",style:Object.assign({},{width:I(t),height:I(t),position:"relative"},f)}),w("div",{className:"IroWheelHue",style:Object.assign({},l,{transform:"rotateZ("+(n.wheelAngle+90)+"deg)",background:n.wheelDirection==="clockwise"?ri:ai})}),w("div",{className:"IroWheelSaturation",style:Object.assign({},l,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),n.wheelLightness&&w("div",{className:"IroWheelLightness",style:Object.assign({},l,{background:"#000",opacity:1-r.v/100})}),w("div",{className:"IroWheelBorder",style:Object.assign({},l,qt(n))}),e.filter(function(p){return p!==s}).map(function(p){return w(F,{isActive:!1,index:p.index,fill:p.hslString,r:n.handleRadius,url:n.handleSvg,props:n.handleProps,x:a[p.index].x,y:a[p.index].y})}),w(F,{isActive:!0,index:s.index,fill:s.hslString,r:n.activeHandleRadius||n.handleRadius,url:n.handleSvg,props:n.handleProps,x:a[s.index].x,y:a[s.index].y}))})}function li(n){var i=function(t,e){var o,s=document.createElement("div");Tn(w(n,Object.assign({},{ref:function(a){return o=a}},e)),s);function r(){var a=t instanceof Element?t:document.querySelector(t);a.appendChild(o.base),o.onMount(a)}return document.readyState!=="loading"?r():document.addEventListener("DOMContentLoaded",r),o};return i.prototype=n.prototype,Object.assign(i,n),i.__component=n,i}var Fe=function(n){function i(t){var e=this;n.call(this,t),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=t.id;var o=t.colors.length>0?t.colors:[t.color];o.forEach(function(s){return e.addColor(s)}),this.setActiveColor(0),this.state=Object.assign({},t,{color:this.color,colors:this.colors,layout:t.layout})}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.addColor=function(e,o){o===void 0&&(o=this.colors.length);var s=new V(e,this.onColorChange.bind(this));this.colors.splice(o,0,s),this.colors.forEach(function(r,a){return r.index=a}),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",s)},i.prototype.removeColor=function(e){var o=this.colors.splice(e,1)[0];o.unbind(),this.colors.forEach(function(s,r){return s.index=r}),this.state&&this.setState({colors:this.colors}),o.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",o)},i.prototype.setActiveColor=function(e){this.color=this.colors[e],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},i.prototype.setColors=function(e,o){var s=this;o===void 0&&(o=0),this.colors.forEach(function(r){return r.unbind()}),this.colors=[],e.forEach(function(r){return s.addColor(r)}),this.setActiveColor(o),this.emit("color:setAll",this.colors)},i.prototype.on=function(e,o){var s=this,r=this.events;(Array.isArray(e)?e:[e]).forEach(function(a){(r[a]||(r[a]=[])).push(o),s.deferredEvents[a]&&(s.deferredEvents[a].forEach(function(l){o.apply(null,l)}),s.deferredEvents[a]=[])})},i.prototype.off=function(e,o){var s=this;(Array.isArray(e)?e:[e]).forEach(function(r){var a=s.events[r];a&&a.splice(a.indexOf(o),1)})},i.prototype.emit=function(e){for(var o=this,s=[],r=arguments.length-1;r-- >0;)s[r]=arguments[r+1];var a=this.activeEvents,l=a.hasOwnProperty(e)?a[e]:!1;if(!l){a[e]=!0;var u=this.events[e]||[];u.forEach(function(d){return d.apply(o,s)}),a[e]=!1}},i.prototype.deferredEmit=function(e){for(var o,s=[],r=arguments.length-1;r-- >0;)s[r]=arguments[r+1];var a=this.deferredEvents;(o=this).emit.apply(o,[e].concat(s)),(a[e]||(a[e]=[])).push(s)},i.prototype.setOptions=function(e){this.setState(e)},i.prototype.resize=function(e){this.setOptions({width:e})},i.prototype.reset=function(){this.colors.forEach(function(e){return e.reset()}),this.setState({colors:this.colors})},i.prototype.onMount=function(e){this.el=e,this.deferredEmit("mount",this)},i.prototype.onColorChange=function(e,o){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",e,o)),this.emit("color:change",e,o)},i.prototype.emitInputEvent=function(e,o){e===0?this.emit("input:start",this.color,o):e===1?this.emit("input:move",this.color,o):e===2&&this.emit("input:end",this.color,o)},i.prototype.render=function(e,o){var s=this,r=o.layout;if(!Array.isArray(r)){switch(r){default:r=[{component:Ue},{component:bt}]}o.transparency&&r.push({component:bt,options:{sliderType:"alpha"}})}return w("div",{class:"IroColorPicker",id:o.id,style:{display:o.display}},r.map(function(a,l){var u=a.component,d=a.options;return w(u,Object.assign({},o,d,{ref:void 0,onInput:s.emitInputEvent.bind(s),parent:s,index:l}))}))},i}(G);Fe.defaultProps=Object.assign({},oi,{colors:[],display:"block",id:null,layout:"default",margin:null});var ci=li(Fe),jt;(function(n){n.version="5.5.2",n.Color=V,n.ColorPicker=ci,function(i){i.h=w,i.ComponentBase=Ct,i.Handle=F,i.Slider=bt,i.Wheel=Ue,i.Box=si}(n.ui||(n.ui={}))})(jt||(jt={}));var ui=jt;const di={functions:{output:{inputs:[],outputs:["Hex String","R","G","B"],functionInit:n=>{n.iro=new ui.ColorPicker("#picker",{}),n.iro.on("input:start",i=>{n.freeze=!0}),n.iro.on("color:change",i=>{n.run()}),n.iro.on("input:end",i=>{n.freeze=!1})},functionUpdate:n=>[n.iro.color.hexString,n.iro.color.red,n.iro.color.green,n.iro.color.blue]}},elements:[{type:"output-text",name:"Hex String"},{type:"output-text",name:"R"},{type:"output-text",name:"G"},{type:"output-text",name:"B"},{type:"custom",name:"RGB",html:`
      <div class="relative">
      <div class=" relative z-20" id="picker"></div>
      <div class="pointer-events-none absolute top-0 left-0 h-full w-full z-10"></div>
      <p class="text-sm text-gray-400">Powered by iro.js</p>
      </div>
      `}]};function hi(n){let i,t,e,o,s,r,a,l,u,d,c,f,p,b,_,C,y,x,D,N,X,Y,Kt,Et,q,Qt,ut,Jt,It,K,Zt,St,Q,te,Ot,J,ee,dt,W,Z,ne,A,Mt,tt,ie,Dt,et,oe,Nt,nt,se,ht,zt,re;return{c(){i=v("main"),t=v("link"),o=E(),s=v("navbar"),r=v("div"),a=v("div"),l=v("label"),l.textContent="Add Node",u=E(),d=v("ul"),c=v("div"),c.textContent="Input",f=E(),p=v("li"),b=v("button"),b.textContent="Constant",_=E(),C=v("li"),y=v("button"),y.textContent="Color",x=E(),D=v("div"),D.textContent="Output",N=E(),X=v("li"),Y=v("button"),Y.textContent="Print",Kt=E(),Et=v("li"),q=v("button"),q.textContent="YouTube",Qt=E(),ut=v("div"),ut.textContent="Math",Jt=E(),It=v("li"),K=v("button"),K.textContent="Operator",Zt=E(),St=v("li"),Q=v("button"),Q.textContent="Clamp",te=E(),Ot=v("li"),J=v("button"),J.textContent="Lerp",ee=E(),dt=v("div"),W=v("div"),Z=v("label"),Z.textContent="Theme",ne=E(),A=v("ul"),Mt=v("li"),tt=v("button"),tt.textContent="Standard",ie=E(),Dt=v("li"),et=v("button"),et.textContent="Standard (Dark)",oe=E(),Nt=v("li"),nt=v("button"),nt.textContent="Retro",se=E(),ht=v("div"),m(t,"href",e=n[2]+"theme/"+n[1]),m(t,"rel","stylesheet"),m(t,"type","text/css"),m(l,"tabindex","0"),m(l,"class","btn btn-sm"),m(c,"class","divider"),m(b,"class","btn-sm"),m(y,"class","btn-sm"),m(D,"class","divider"),m(Y,"class","btn-sm"),m(q,"class","btn-sm"),m(ut,"class","divider"),m(K,"class","btn-sm"),m(Q,"class","btn-sm"),m(J,"class","btn-sm"),m(d,"tabindex","0"),m(d,"class","dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52"),m(a,"class","dropdown"),m(r,"class","flex-1"),m(Z,"tabindex","0"),m(Z,"class","btn btn-sm btn-outline"),m(tt,"class","btn-sm"),m(et,"class","btn-sm"),m(nt,"class","btn-sm"),m(A,"tabindex","0"),m(A,"class","dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52"),m(W,"class","dropdown dropdown-end"),m(dt,"class","flex-none"),m(s,"class","navbar px-5 fixed z-20 bg-white shadow-sm"),m(ht,"class","w-full h-screen bg-white overflow-hidden relative select-none"),m(ht,"id","node-editor")},m(j,Tt){Ye(j,i,Tt),g(i,t),g(i,o),g(i,s),g(s,r),g(r,a),g(a,l),g(a,u),g(a,d),g(d,c),g(d,f),g(d,p),g(p,b),g(d,_),g(d,C),g(C,y),g(d,x),g(d,D),g(d,N),g(d,X),g(X,Y),g(d,Kt),g(d,Et),g(Et,q),g(d,Qt),g(d,ut),g(d,Jt),g(d,It),g(It,K),g(d,Zt),g(d,St),g(St,Q),g(d,te),g(d,Ot),g(Ot,J),g(s,ee),g(s,dt),g(dt,W),g(W,Z),g(W,ne),g(W,A),g(A,Mt),g(Mt,tt),g(A,ie),g(A,Dt),g(Dt,et),g(A,oe),g(A,Nt),g(Nt,nt),g(i,se),g(i,ht),zt||(re=[T(b,"click",n[4]),T(y,"click",n[5]),T(Y,"click",n[6]),T(q,"click",n[7]),T(K,"click",n[8]),T(Q,"click",n[9]),T(J,"click",n[10]),T(tt,"click",n[11]),T(et,"click",n[12]),T(nt,"click",n[13])],zt=!0)},p(j,[Tt]){Tt&2&&e!==(e=j[2]+"theme/"+j[1])&&m(t,"href",e)},i:vt,o:vt,d(j){j&&we(i),zt=!1,at(re)}}}function fi(n,i,t){const o="/SnapLineJS/";let s=null;Je(async()=>{t(0,s=new In("node-editor"))});let r="standard.css";function a(x){t(1,r=x)}return[s,r,o,a,()=>s.addNode(pn,0,0),()=>s.addNode(di,0,0),()=>s.addNode(gn,0,0),()=>s.addNode(un,0,0),()=>s.addNode(dn,0,0),()=>s.addNode(hn,0,0),()=>s.addNode(fn,0,0),()=>a("standard.css"),()=>a("dark.css"),()=>a("retro.css")]}class pi extends cn{constructor(i){super(),ln(this,i,fi,hi,Ge,{})}}new pi({target:document.getElementById("app")});
